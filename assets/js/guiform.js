/*!
 * GuiForm Plugin
 * https://www.guiform.com
 *
 * By: Russell C. Pabon
 * http://russellpabon.com
 *
 */
(function(){var a=jQuery;a.fn.getCursorPosition=function(){var d=a(this).get(0);var e=0;if("selectionStart" in d){e=d.selectionStart}else{if("selection" in document){d.focus();var b=document.selection.createRange();var c=document.selection.createRange().text.length;b.moveStart("character",-d.value.length);e=b.text.length-c}}return e};a.fn.removeTags=function(){this.each(function(){if(a(this).children().length==0){a(this).replaceWith(a(this).text())}else{a(this).children().unwrap()}});return this};a.cleanTags=function(c,b){var d=a("<div />").append(c);d.find(":not("+b+")").removeTags();return d};a.fn.replaceTag=function(b){this.replaceWith(function(){return a("<"+b+"/>",{name:a(this).attr("name"),html:a(this).html()})})};a.fn.isAuto=function(b){if(b=="width"){return(this[0].style.width=="auto")?true:false}else{if(b=="height"){return(this[0].style.height=="auto")?true:false}}};a.quoteAttr=function(c,b){b=b?"&#13;":"\n";return(""+c).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,b).replace(/[\r\n]/g,b)};a.fn.removeClassRegEx=function(f){var e=a(this).attr("class");if(!e||!f){return false}var c=[];e=e.split(" ");for(var d=0,b=e.length;d<b;d++){if(!e[d].match(f)){c.push(e[d])}}a(this).attr("class",c.join(" "));return a(this)};a.fn.hasClassRegEx=function(e){var d=a(this).attr("class");if(!d||!e){return false}d=d.split(" ");for(var c=0,b=d.length;c<b;c++){if(d[c].match(e)){return true}}return false};a.fn.hasAttr=function(b){if(this.attr){var c=this.attr(b)}else{var c=this.getAttribute(b)}return(typeof c!=="undefined"&&c!==false&&c!==null)};a.bytesToSize=function(b,e){e=e||true;var d=["Bytes","KB","MB","GB","TB"];if(b==0){return"n/a"}var c=parseInt(Math.floor(Math.log(b)/Math.log(1024)));e=(e)?" "+d[c]:"";return Math.round(b/Math.pow(1024,c),2)+e};a.browser={object:function(){return navigator.userAgent.toLowerCase()},agent:function(){if(this.object().indexOf("msie")>-1){return"msie/"+this.object().split("msie ")[1].split(";")[0]}else{if(this.object().indexOf("chrome")>-1){return"chrome/"+this.object().split("chrome/")[1].split(" ")[0]}else{if(this.object().indexOf("safari")>-1){return"safari/"+this.object().split("version/")[1].split(" ")[0]}else{if(this.object().indexOf("opera")>-1){return"opera/"+this.object().split("opera/")[1].split(" ")[0]}else{return"firefox/"+this.object().split("firefox/")[1]}}}}},name:function(){return this.agent().split("/")[0]},version:function(){return this.agent().split("/")[1]}};a.fn.exists=function(){return this.length>0?this:false};a.guiform={emails:function(c,e){e=e||"";if(a(guiBuilder.emails).size()>0){var f=a(".f_email").map(function(g){var h=[[a("input",this).attr("name"),a("label",this).text()]];return h}).get();var b=a(".f_text input[class='validation[email]']").map(function(g){var h=[[a(this).attr("name"),a(this).parents(".item").find("label").text()]];return h}).get();var d='<select name="'+c+'" class="'+e+'">';a.each(guiBuilder.emails,function(){d+='<option value="'+this.name+'">'+this.name+"</option>"});a.each(a.merge(f,b),function(){d+='<option value="{'+this[0]+'}">'+this[1]+"</option>"});d+="</select>"}else{d='<a href="'+guiBuilder.guiform_url+'">Click here to add email address.</a>'}return d},_XMLHttpFactories:[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var c=false;for(var b=0;b<this._XMLHttpFactories.length;b++){try{c=this._XMLHttpFactories[b]()}catch(d){continue}break}return c},Fonts:{"Andale Mono":'"Andale Mono"',Arial:"Arial","Arial Black":'"Arial Black"',"Arial Narrow":'"Arial Narrow"',"Arial Rounded MT Bold":'"Arial Rounded MT Bold"',"Big Caslon":'"Big Caslon"',"Bodoni MT":'"Bodoni MT"',"Book Antiqua":'"Book Antiqua"',"Brush Script MT":'"Brush Script MT"',"Calisto MT":'"Calisto MT"',Calibri:"Calibri",Cambria:"Cambria, Georgia, serif",Candara:"Candara","Century Gothic":'"Century Gothic"',"Courier New":'"Courier New"',"Franklin Gothic Medium":'"Franklin Gothic Medium"',Garamond:"Garamond",Georgia:"Georgia","Gill Sans":'"Gill Sans"',"Goudy Old Style":'"Goudy Old Style"',"Helvetica Neue":'"Helvetica Neue"',Helvetica:"Helvetica","Hoefler Text":'"Hoefler Text"',Impact:"Impact","Lucida Bright":'"Lucida Bright"',"Lucida Console":'"Lucida Console"',"Lucida Grande":'"Lucida Grande"',"Lucida Sans Typewriter":'"Lucida Sans Typewriter"',"Open Sans":'"Open Sans"',Papyrus:"Papyrus",Perpetua:"Perpetua",Rockwell:"Rockwell","Rockwell Extra Bold":'"Rockwell Extra Bold"',"sans-serif":"sans-serif","Segoe UI":'"Segoe UI"',Tahoma:"Tahoma","Times New Roman":"times new roman","Trebuchet MS":'"Trebuchet MS"',Verdana:"Verdana"},fonts:guiBuilder.fonts};a.popupBlockerChecker={check:function(c){var b=this;if(c){if(/chrome/.test(navigator.userAgent.toLowerCase())){setTimeout(function(){b._is_popup_blocked(b,c)},200)}else{c.onload=function(){b._is_popup_blocked(b,c)}}}else{b._displayError()}},_is_popup_blocked:function(b,c){if((c.innerHeight>0)==false){b._displayError()}},_displayError:function(){alert("Popup window is blocked for this website.")}};a.ui.draggable.prototype._generatePosition=function(c){var d=this.options,k=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(k[0].tagName);var g=c.pageX;var f=c.pageY;if(this.originalPosition){var b;if(this.containment){if(this.relative_container){var j=this.relative_container.offset();b=[this.containment[0]+j.left,this.containment[1]+j.top,this.containment[2]+j.left,this.containment[3]+j.top]}else{b=this.containment}if(c.pageX-this.offset.click.left<b[0]){g=b[0]+this.offset.click.left}if(c.pageY-this.offset.click.top<b[1]){f=b[1]+this.offset.click.top}if(c.pageX-this.offset.click.left>b[2]){g=b[2]+this.offset.click.left}if(c.pageY-this.offset.click.top>b[3]){f=b[3]+this.offset.click.top}}if(d.grid){var i=d.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/d.grid[1])*d.grid[1]:this.originalPageY;f=b?(!(i-this.offset.click.top<b[1]||i-this.offset.click.top>b[3])?i:(!(i-this.offset.click.top<b[1])?i-d.grid[1]:i+d.grid[1])):i;var e=d.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0]:this.originalPageX;g=b?(!(e-this.offset.click.left<b[0]||e-this.offset.click.left>b[2])?e:(!(e-this.offset.click.left<b[0])?e-d.grid[0]:e+d.grid[0])):e}}return{top:(f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:k.scrollTop())))),left:(g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:k.scrollLeft())))}};a.ui.sortable.prototype._mouseStop=function(c,d){if(!c){return}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,c)}if(this.options.revert){var b=this;var e=this.placeholder.offset();this.reverting=true;a(this.helper).animate({left:e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top},parseInt(this.options.revert,10)||500,function(){b._clear(c)})}else{this._clear(c,d)}return false}}).call(this);(function(a,b){a.widget("GuiForm.tools",{options:{id:guiform.id||false,database:guiBuilder.database,screenPreview:0,reload:false,timer:0,caret:"",item_errors:{},menu:{save:["&#xe00a;","Save Form"],create:["&#xe077;","Create New Form"],preview:["&#xe09a;","Form Preview"],style:["&#xe026;","Form Style"],required:["&#xe013;","Required"],merge:["&#xe071;","Merge Field"],"delete":["&#xe003;","Remove Field"],properties:["&#xe038;","Field Properties"],code:["&#xe01c;","Source Code"],"thank-you":["&#xe07c;","Thank You Message"],mail:["&#xe03e;","Email Settings"]},Properties:{"Font Size":["<input class='prop-spinner' type='text' value='' data-default='12' data-min='0' data-max='100' id='p_font_size'> pixels",""],"Maximum Input":["<input class='prop-spinner' type='text' value='' data-default='1' data-min='1' id='p_max_input'>",""],"Label Width":["<input class='prop-spinner' type='text' value='' data-default='0' data-min='0' data-max='450' id='p_label_width'>",""],"Max File Size":["<input class='prop-spinner' type='text' value='' data-default='1' data-min='1' id='p_max_size'>						  	                         <span style='margin: 0px 10px;'>MB</span>",""],"Maximum Value":["<input class='prop-spinner' type='text' value='' data-default='null' type='text' id='p_maximum'>",""],"Minimum Value":["<input class='prop-spinner' type='text' value='' data-default='null' type='text' id='p_minimum'>",""],"Line Height":["<input class='prop-spinner' type='text' value='' data-default='0' data-min='0' data-max='100' id='p_line_height'> pixels",""],Layout:["Width <input class='prop-spinner' type='text' value='' data-default='0' data-min='0' id='p_width'>								                         Height <input class='prop-spinner' type='text' value='' data-default='0' data-min='0' id='p_height'>",""],"Options Text Width":["<input class='prop-spinner' type='text' value='' data-default='130' data-min='0' data-max='300' id='p_options_label'>",""],"Option Columns":["<input class='prop-spinner' type='text' value='' data-default='1' data-min='1' data-max='4' id='p_columns'>",""],"Textarea Height":["<input class='prop-spinner' type='text' value='' data-default='250' data-min='0' data-max='600' id='p_textarea_height'>",""],"Password Minimum Length":["<input class='prop-spinner' type='text' value='' data-default='8' data-min='2' data-max='25' id='p_password_minimum_length'>",""],Validation:["<ul>										  										<li><label><input type='radio' class='clickinput' name='validation' value='none'><span>None</span></label></li>																					<li><label><input type='radio' class='clickinput' name='validation' value='email'><span>Email</span></label></li>																					<li><label><input type='radio' class='clickinput' name='validation' value='numeric'><span>Numeric</span></label></li>																					<li><label><input type='radio' class='clickinput' name='validation' value='alphabet'><span>Alphabet</span></label></li>																					<li><label><input type='radio' class='clickinput' name='validation' value='alphanum'><span>AlphaNumeric</span></label></li>																				</ul>",""],"Text Alignment":["<div class='button'>																					<input type='radio' class='clickinput' name='alignment' id='radio1' value='left' /><label for='radio1' title='left'><span class='icon' data-icon='&#xe055;'></span></label>																					<input type='radio' class='clickinput' name='alignment' id='radio2' value='center' /><label for='radio2' title='center'><span class='icon' data-icon='&#xe056;'></span></label>																					<input type='radio' class='clickinput' name='alignment' id='radio3' value='right' /><label for='radio3' title='right'><span class='icon' data-icon='&#xe063;'></span></label>																					<input type='radio' class='clickinput' name='alignment' id='radio4' value='justify' /><label for='radio4' title='justify'><span class='icon' data-icon='&#xe057;'></span></label>																				</div>",""],"Submit Alignment":["<ul>																			  	 <li><label><input type='radio' class='clickinput' name='submit_alignment' value='right'><span>Right</span></label></li>																			  	 <li><label><input type='radio' class='clickinput' name='submit_alignment' value='left'><span>Left</span></label></li>																			  	 <li><label><input type='radio' class='clickinput' name='submit_alignment' value='center'><span>Center</span></label></li>																		    </ul>",""],"Display Label":["<label><input type='checkbox' class='clickinput' name='hide_label'><span> Hidden</span></label>",""],"Unique Value":["<label><input type='checkbox' class='clickinput' name='p_unique_value'><span> No duplicate entry</span></label>","<p>Field must be required enable.</p>"],"Show Reset Button":["<label><input type='checkbox' class='clickinput' name='p_show_reset'><span> Reset</span></label>",""],Visibility:["<label><input type='checkbox' class='clickinput' name='p_visible'> Hidden</label>",""],Display:["<label><input type='checkbox' class='clickinput' name='p_display'> None</label>",""],"Allow Multiple Upload":["<label><input type='checkbox' class='clickinput' name='p_multiple_file'></label>",""],"Show Switch Label":["<label><input type='checkbox' class='clickinput' name='p_show_switch_label'><span> Display button label in both sides.</span></label>",""],"File Extentions":["<textarea class='textinput' id='p_file_extensions'>jpg, jpeg, png, gif, pdf, doc, docx, xls, csv, txt, html, zip, mp3, mpg, flv, avi</textarea>",""],"Text Content":["<textarea class='textinput' id='p_text_content'></textarea>","<p>Allows: b, strong, i, em, u, br, blockquote, a</p>"],Text:["<input class='textinput' type='text' id='p_text' value=''>",""],"Sub Text":["<input class='textinput' type='text' id='p_sub_text' value=''>",""],Label:["<input class='textinput' type='text' id='p_text_label' value=''>",""],"Submit Text":["<input class='textinput' type='text' id='p_submit_text' value=''>",""],"Reset Text":["<input class='textinput' type='text' id='p_reset_text' value=''>",""],"Loading Text":["<input class='textinput' type='text' id='p_loading_text' value=''>",""],Placeholder:["<input class='textinput' type='text' id='p_placeholder' value=''>",""],"Default Value":["<input class='textinput' type='text' id='p_default_value' value=''>",""],"Short Description":["<input class='textinput' type='text' id='p_short_description' value=''>",""],"On Label":["<input class='textinput' type='text' id='p_on_label' value=''>",""],"Off Label":["<input class='textinput' type='text' id='p_off_label' value=''>",""],"Input Mask":["<input class='textinput' type='text' id='p_input_mask' value=''>						  													 <p>Example: <code>(###) ###-####</code></p>						  													 <p>Output: <code>(123) 456-7890</code></p>","<ul><li>~ = + or -</li>						  													 <li>@ = Alphabet</li>						  													 <li># = Numeric</li>						  													 <li>* = Alphanumeric</li></ul>"],"List Type":["<select id='p_list_type'>																					<option value='disc'>disc</option>																					<option value='square'>square</option>																					<option value='circle'>circle</option>																					<option value='decimal'>decimal</option>																					<option value='decimal-leading-zero'>decimal-leading-zero</option>																					<option value='lower-roman'>lower-roman</option>																					<option value='upper-roman'>upper-roman</option>																					<option value='lower-greek'>lower-greek</option>																					<option value='lower-alpha'>lower-alpha</option>																					<option value='upper-alpha'>upper-alpha</option>																					<option value='hiragana'>hiragana</option>																					<option value='katakana'>katakana</option>																				</select>",""],Offset:["<div id='p_submit_offset'></div><div class='p_submit_offset_value'>Value : <span>0px</span></div>",""],"Font Family":["",""],"Item ID":["<span style='font-weight: bold;' id='p_item_id'></span>",""],"Compare With":["<select id='p_compare_with'></select>",""]},Style:{"Background Color":"<input type='text' id='backgroundColor' class='basic' value='' />","Label Color":"<input type='text' id='color' class='basic' value='' />","Border Color":"<input type='text' id='borderColor' class='basic' value='' />"},Options:{Gender:["Male","Female"],Days:["Monday","Teusday","Wednesday","Thursday","Friday","Saturday","Sunday"],Months:["January","February","March","April","May","June","July","August","September","October","November","December"],"US States":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],"US States Abbr":["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],Countries:["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia-Herzegovina","Botswana","Bouvet Island","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo, Democratic Republic of the (Zaire)","Congo, Republic of","Cook Islands","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Guiana","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe (French)","Guam (USA)","Guatemala","Guinea","Guinea Bissau","Guyana","Haiti","Holy See","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast (Cote D`Ivoire)","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique (French)","Mauritania","Mauritius","Mayotte","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia (French)","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","North Korea","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn Island","Poland","Polynesia (French)","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Helena","Saint Kitts and Nevis","Saint Lucia","Saint Pierre and Miquelon","Saint Vincent and Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and South Sandwich Islands","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard and Jan Mayen Islands","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste (East Timor)","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Virgin Islands","Wallis and Futuna Islands","Yemen","Zambia","Zimbabwe"]},Icons:{Gender:{Male:'<span title="Male" data-icon="&#xe047;"></span>',Female:'<span title="Female" data-icon="&#xe06c;"></span>'},Alignment:{Left:'<span title="Left" data-icon="&#xe055;"></span>',Center:'<span title="Center" data-icon="&#xe056;"></span>',Right:'<span title="Right" data-icon="&#xe063;"></span>',Justify:'<span title="Justify" data-icon="&#xe057;"></span>'},Arrows:{Up:'<span title="Up" data-icon="&#xe014;"></span>',Left:'<span title="Left" data-icon="&#xe099;"></span>',Down:'<span title="Down" data-icon="&#xe02d;"></span>',Right:'<span title="Right" data-icon="&#xe09d;"></span>'},"Operating System":{Android:'<span title="Android" data-icon="&#xe028;"></span>',Apple:'<span title="Apple" data-icon="&#xe019;"></span>',Linux:'<span title="Linux" data-icon="&#xe0c0;"></span>',Windows:'<span title="Windows" data-icon="&#xe020;"></span>'},"Content Management System":{Blogger:'<span title="Blogger" data-icon="&#xe018;"></span>',Drupal:'<span title="Drupal" data-icon="&#xe017;"></span>',Joomla:'<span title="Joomla" data-icon="&#xe0d3;"></span>',WordPress:'<span title="WordPress" data-icon="&#xe0b7;"></span>'}}},init:guiform,autoSave:function(){var d=this;var c=this.options;clearInterval(c.timer);c.timer=setInterval(function(f){var e=a(".ui-sortable .ui-draggable:not(.ui-sortable .ui-draggable.merge), .ui-sortable .merge-item");if(parseInt(guiBuilder.settings.autosave.value)==1&&c.id!=""&&e.size()>0){d.save("autosave")}},parseInt(guiBuilder.settings.autosave_time.value)*1000)},_build:function(){var c=this.options;var f=this;a("#GuiForm").append(a("<div id='header'></div>"));var d='<ul class="clearfix">';a.each(c.menu,function(g,h){d+='<li id="'+g+'"><span title="'+h[1]+'" data-icon="'+h[0]+'" class="menu-button"></li>'});d+='<li class="formName-list"><input maxlength="40" id="formName" title="Form Title" placeholder="Untitled Form" type="text" name="formName" value="'+guiform.title+'"></li>';d+="</ul>";a("#header").append(d);a("#header ul").css("min-width",a("#wpadminbar").width()-(a("#adminmenuwrap").width()+35));if(a("#guiform-style").size()==0){var e=a("<style type='text/css' id='guiform-style' media='all' scoped />");a("#canvas").prepend(e.clone());a("#guiform-style").html("#canvas, #canvas .ui-widget{background-color: #FFFFFF;font-family: Verdana,sans-serif;} #canvas .label{color: #333333;} #canvas input, #canvas textarea, #canvas .f_select [name]{border: 1px solid #CCCCCC;}")}if(a("#guiform-form").size()==0){var e="<style type='text/css' id='guiform-form' media='all' scoped></style>";a("#canvas").prepend(e)}f.resetSaving();a.mask.definitions["#"]="[0-9]";a.mask.definitions["@"]="[a-zA-Z]";a.mask.definitions["*"]="[a-zA-Z0-9]";a.mask.definitions["~"]="[+-]";a(".f_phone input").each(function(){a(this).mask(a(this).attr("data-mask"))});a(".menu-button, #formName").tooltip({position:{my:"center bottom-20",at:"center top",using:function(g,h){a(this).css(g).css("z-index","999999");a("<div>").addClass("arrow").addClass(h.vertical).addClass(h.horizontal).appendTo(this)}}})},_create:function(){this._build();var c=this.options;var g=this;var f=a(document);g.autoSave();f.on("blur","#formName",function(h){guiform.title=a.trim(a(this).val())});f.keydown(function(l){var o=a("#tab-fonts[aria-hidden=false]").size();var k=l.charCode||l.keyCode||0;var m=document.activeElement.nodeName.toLowerCase()||c.focus;var j=["input","textarea","select"];if(a(".ui-tabs").size()>0){if(m=="body"&&o==0&&a("#window-properties").size()==0){return false}}if(o>0){var i=a("#fonts-container li").index(a("#fonts-container li.active"));if(k==38){if(i==0){return false}a("#fonts-container ul").scrollTop(i*27-164);a("#fonts-container li:eq("+i+")").removeClass("active");a("#fonts-container li:eq("+(i-1)+")").addClass("active")}if(k==40){a("#fonts-container ul").scrollTop(i*27-108);if(i>=a("#fonts-container li").size()-1){return false}a("#fonts-container li:eq("+i+")").removeClass("active");a("#fonts-container li:eq("+(i+1)+")").addClass("active")}if(k==13){a("#guifbox").hide("slow");a("#fonts.menu-button").removeClass("on")}var h=a("#fonts-container li.active").attr("data-value").replace(/"/g,"'");var n=a("#guiform-style").text();n=n.split("font-family: ")[1].split(";")[0];a("#guiform-style").text(a("#guiform-style").text().replace(n,h))}}).keyup(function(m){var k=m.charCode||m.keyCode||0;a("#contextMenu").hide();var l=a(".ui-sortable li.ui-draggable.active");var n=document.activeElement.nodeName.toLowerCase()||c.focus;var j=["input","textarea","select"];var o=a("#fonts-container").size();var h=a("#fonts-container ul").scrollTop();if(a(".ui-tabs").size()>0){if(n=="body"&&o==0&&a("#window-properties").size()==0){return false}}if(a.inArray(n,j)==-1&&o==0){if(k==46){g.remove()}else{if(m.ctrlKey==false&&a(".ui-sortable .ui-draggable").size()>0){if(l.size()>0){var i=a(".ui-sortable .ui-draggable").index(l);if(k==37||k==38){if(i==0){return false}a(".ui-sortable .ui-draggable:eq("+i+")").removeClass("active");a(".ui-sortable .ui-draggable:eq("+(i-1)+")").addClass("active")}if(k==39||k==40){if(i>=a(".ui-sortable .ui-draggable").size()-1){return false}a(".ui-sortable .ui-draggable:eq("+i+")").removeClass("active");a(".ui-sortable .ui-draggable:eq("+(i+1)+")").addClass("active")}a(window).scrollTop(a(".ui-sortable li.ui-draggable.active").position().top+40)}else{if(k>=37&&k<=40){a(".ui-sortable .ui-draggable:eq(0)").addClass("active")}}g.tabs_properties()}}}});f.on("click","#fonts-container li",function(){a("#fonts-container li").removeClass("active");a(this).addClass("active");var i=a("#guiform-style").text();i=i.split("font-family: ")[1].split(";")[0];var h=a("#fonts-container li.active").attr("data-value");a("#guiform-style").text(a("#guiform-style").text().replace(i,h.replace(/"/g,"'")))});f.on("mousedown",".ui-sortable .ui-draggable",function(h){if(a(this).find(".merge-item").size()==0){a(".merge-item.active").removeClass("active")}if(h.ctrlKey){if(a(this).hasClass("f_page_break")){alert("You cannot merge page break tools");return false}a("#guifbox").remove();a(".merge-item.active").removeClass("active");a(".ui-sortable li.ui-draggable.active").removeClass("active").addClass("selected");if(a(this).hasClass("selected")){a(this).removeClass("selected")}else{a(this).addClass("selected")}}else{a("#canvas li").removeClass("selected");a(".ui-sortable li.ui-draggable.active").removeClass("active");a(this).addClass("active")}if(a("#window-properties").size()){g.tabs_properties();g.properties();g.get_properties()}g.checked()});f.on("dblclick",".ui-sortable li.ui-draggable",function(h){if(a(this).hasClass("selected")==false){g.tabs_properties(0)}});f.on("click",".edit-label",function(){var h=a(this).text();var i=a(this).parent().parent().attr("id");a(this).removeClass("edit-label");a(this).html("<input id='"+i+"' class='edit-label-input' value=''>");a(this).find("input").focus();a(this).find("input").val(h)});f.on("keydown",".edit-label-input",function(i){var h=i.charCode||i.keyCode||0;if(h==9){return false}}).on("keyup",".edit-label-input",function(k){var l=this.id.split("-")[2];var j=(a(".ui-sortable li.ui-draggable.active").hasClass("merge"))?a(".ui-sortable .merge-item.active"):a(".ui-sortable li.ui-draggable.active");var i=(a("#item-"+l).find(".required").size()>0)?a.trim(this.value)+"<span class='required'>*</span>":a.trim(this.value);a("#item-"+l).find(".label").html(i);if(l==j.attr("id").split("-")[1]){var h=a("#tab-li-properties a");(a.trim(this.value)!=="")?h.text(a.trim(this.value)):h.html("&nbsp;")}}).on("blur",".edit-label-input",function(h){var i=a(this).val();a(this).parent().addClass("edit-label").html(i)});f.on("keyup","#guiform-canvas",function(h){a("#guiform-form").text(a(this).val())});f.on("keyup","#html-source",function(i){var h=g._form();a(".wrap",h).html(a.cleanTags(this.value,"div, li, ul, ol, table, thead, tbody, tfoot, th, tr, td, p, fieldset, label, img, span, b, strong, i, em, u, br, blockquote, a"))});f.on("click",".caret",function(){c.caret=a(this).attr("name")});f.on("click",".variable-fields li",function(){var h=a(this).attr("data-name");if(c.caret=="tinymce"||c.caret==""){tinyMCE.execCommand("mceInsertContent",false,h)}else{a(".caret[name='"+c.caret+"']").atCaret("insert",h)}return false});var e=true;f.on("click","#options-list .add",function(){var h=a("#options-list li").index(a(this).parent());var i='<li class="selected" style="display:none;">											<input type="radio" name="checked"><input type="text" name="label" value="Text">											<input type="text" name="value" value="value">											<span data-icon="&#xe08c;" class="move"></span>											<span data-icon="&#xe004;" class="add"></span>											<span data-icon="&#xe093;" class="delete"></span>										</li>';a("#options-list li:eq("+h+")").after(i);a("#options-list .selected").slideDown("slow",function(){a(this).removeClass("selected")})}).on("click","#options-list .delete",function(){if(e==true){e=false;if(a("#options-list li").size()<2){e=true}if(a("#options-list li").size()>1){a(this).parent().slideUp("slow",function(){a(this).remove();e=true})}}}).on("click","#bulk-options li",function(){var j=a.trim(a(this).text());var i=this;var h="";var l=g._form();var k=c.Options[j];k=(l.hasClass("f_button")&&a(i).hasClass("options")==false)?c.Icons[j]:k;a.each(k,function(m){var n=a(i).hasClass("options")?this[0]:this;n=(l.hasClass("f_button")&&a(i).hasClass("options")==false)?m:n;var o=a(i).hasClass("options")?this[1]:this;h+='<li>											<input type="radio" name="checked">											<input type="text" name="label" value="'+a.quoteAttr(o)+'">											<input type="text" name="value" value="'+a.quoteAttr(n)+'">											<span data-icon="&#xe08c;" class="move"></span>											<span data-icon="&#xe004;" class="add"></span>											<span data-icon="&#xe093;" class="delete"></span>										</li>'});a("#options-list").html(h)}).on("click","#clear-options",function(){var h='<li>											<input type="radio" name="checked"><input type="text" name="label" value="Text">											<input type="text" name="value" value="Value">											<span data-icon="&#xe08c;" class="move"></span>											<span data-icon="&#xe004;" class="add"></span>											<span data-icon="&#xe093;" class="delete"></span>										</li>';a("#options-list").html(h)}).on("click","#save-options",function(){g.rebuild_options()});f.on("click","#save-items",function(){var i=g._form();var h="";if(i.hasClass("f_list")){a("#items-list .items-list-li").each(function(){h+="<li>"+this.value+"</li>"});a("ul",i).html(h);alert("Save unordered list!")}});f.on("keydown",".ui-spinner-input",function(i){var h=i.charCode||i.keyCode||0;if(i.shiftKey==true){return false}return(h==8||h==9||h==46||(h>=35&&h<=40)||(h>=48&&h<=57)||(h>=96&&h<=105));i.preventDefault()}).on("cut copy paste",".ui-spinner-input",function(h){h.preventDefault()});var d=null;f.on("keyup change","#preview-screen",function(h){if(d==this.value){return false}d=this.value;g.preview_screen(this.value)});g.checked()},_init:function(){this._event()},_form:function(){return(a(".ui-sortable li.ui-draggable.active").hasClass("merge"))?a(".ui-sortable .merge-item.active"):a(".ui-sortable li.ui-draggable.active")},_event:function(){var c=this.options;var e=this;var d=a("body");a("#header").on("click","li",function(g){var h=this.id;switch(h){case"save":e.save();break;case"create":e.create();break;case"preview":e.preview();break;case"print":e.print();break;case"required":e.required(g,this);break;case"merge":e.merge(g,this);break;case"delete":e.remove();break;case"properties":var f=(a(".ui-sortable li.ui-draggable.active").hasClass("merge"))?a(".ui-sortable .merge-item.active"):a(".ui-sortable li.ui-draggable.active");(f.size()>0)?e.tabs_properties(0):alert("Select a field first.");break;case"style":e.tabs_style(0);break;case"mail":e.notification();break;case"code":e.code();break;case"thank-you":e.confirmation();break;default:}});d.on("change keyup","#p_target_attribute",function(g){var f=e._form();var h=a.trim(a(this).val());a("a",f).attr("target",h)});d.on("change keyup","#p_fonts",function(g){var f=e._form();f.find(":header, p, li").css("font-family",a(this).val())});d.on("change keyup","#p_compare_with",function(g){var f=e._form();a("input",f).attr("data-compare",a(this).val())});d.on("change keyup","#p_list_type",function(g){var f=e._form();f.find("ul").attr("class",this.value)});d.on("cut copy paste","#p_input_mask",function(f){f.preventDefault()});d.on("blur",".blur",function(f){var g=(a.trim(this.value)=="")?"":a.trim(this.value);e.blur(g,f.target.id)});d.on("click",".clickinput",function(f){e.clickInput(this.value,a(this))});d.on("spin",".ui-spinner",function(f,h){var g=a.trim(h.value);e.spinner(g,f.target.id)}).on("keyup",".ui-spinner input",function(f){var g=a.trim(this.value);e.spinner(g,f.target.id)});d.on("keyup keydown",".textinput",function(f){e.textInput(this.value,f.target.id)})},blur:function(d,f){var e=this;var c=this._form()},refresh:function(d,c,f){var h=this;var e=h._form();f=f||false;if(d=="f_button"){var g=a("#canvas .button");if(c==false){var g=a(".button",e);a(".button",e).buttonset("destroy")}g.buttonset()}else{if(d=="f_spinner"){var g=a("#canvas .ui-spinner");if(c==false){var g=a(".ui-spinner",e);a(".ui-spinner",e).spinner("destroy")}g.each(function(){var i=a(this).attr("data-max");var j=a(this).attr("data-min");a(this).spinner({max:i,min:j})})}}},clickInput:function(f,c){var h=this;var e=h._form();var g=a(c).attr("name");f=a.trim(f);if(g=="validation"){a("input",e).attr("data-validation",f)}else{if(g=="alignment"){if(e.hasClass("f_page_break")){e.removeClass("align-left align-right align-center");e.addClass("align-"+f)}else{a(".wrap",e).css("text-align",f)}}else{if(g=="hide_label"){(a(c).is(":checked"))?a(".label",e).hide():a(".label",e).show()}else{if(g=="submit_alignment"){a("#p_submit_offset").slider("option","value",0);a(".wrap span",e).css("margin-left","");a(".wrap",e).css("text-align",f);a(".p_submit_offset_value span").text("0px")}else{if(g=="p_show_reset"){a(".wrap span",e).css("margin-left","");a("#p_submit_offset").slider("option","value",0);if(a(c).is(":checked")){var d=a.trim(a("#p_reset_text").val());a("button[type=submit]",e).before('<button name="reset" type="reset">'+(d==""?"Clear Form":d)+"</button>")}else{a("button[type=reset]",e).remove()}a(".p_submit_offset_value span").text("0px")}else{if(g=="p_unique_value"){(a(c).is(":checked"))?a("input",e).attr("data-unique","true"):a("input",e).attr("data-unique","false")}else{if(g=="p_visible"){(a(c).is(":checked"))?e.addClass("hidden"):e.removeClass("hidden")}else{if(g=="p_display"){(a(c).is(":checked"))?e.addClass("none"):e.removeClass("none")}else{if(g=="p_multiple_file"){e=a('input[type="file"]',e);if(a(c).is(":checked")){e.attr("multiple","multiple");e.wrap('<div class="guif-dropzone"></div>');e.parents(".guif-dropzone").prepend("<span>Add File</span>");e.attr("name",e.attr("name")+"[]")}else{e.removeAttr("multiple");e.attr("name",e.attr("name").split("[")[0]);e.unwrap();e.parents(".wrap").find("span").remove()}}else{if(g=="p_show_switch_label"){(a(c).is(":checked"))?a("input",e).attr("data-showlabel","true"):a("input",e).attr("data-showlabel","false");h.refresh("f_switch",false)}}}}}}}}}}},textInput:function(f,i){var h=this;var e=h._form();f=a.trim(f);if(i=="p_short_description"){e.find(".short-description").remove();var d=a.cleanTags(f,"span, b, strong, i, em, u, br, blockquote, a");d="<p class='short-description'>"+d.html()+"</p>";d=f==""?"":d;e.find(".wrap").append(d)}else{if(i=="p_file_extensions"){a("input",e).attr("file-accept",f)}else{if(i=="p_input_mask"){a("input",e).mask(f);a("input",e).attr("data-mask",f)}else{if(i=="p_submit_text"){var d=a.cleanTags(f,"span, strong, i, u");a("button[type='submit']",e).html(d.html())}else{if(i=="p_reset_text"){var d=a.cleanTags(f,"span, strong, i, u");a("button[type='reset']",e).html(d.html())}else{if(i=="p_loading_text"){var d=a.cleanTags(f,"span, strong, i, u");a("button[type='submit']",e).attr("data-loader",d.html())}else{if(i=="p_placeholder"){a("input[type='text'], textarea",e).attr("placeholder",f)}else{if(i=="p_text_label"){var f=(a(".required",e).size()>0)?f+"<span class='required'>*</span>":f;(f!=="")?a(".ui-tabs-nav a:eq(0)").text(f):a(".ui-tabs-nav a:eq(0)").html("&nbsp;");var d=a.cleanTags(f,"span, strong, i, u, em, blockquote");a(".label",e).html(d.html())}else{if(i=="p_default_value"){a("input[type='text'], textarea, select",e).attr("data-default",f)}else{if(i=="p_sub_text"){var d=a.cleanTags(f,"span, em, u, blockquote, a, strong, i");a(".sub-text",e).remove();a(".wrap",e).append("<div class='sub-text'>"+d.html()+"</div>")}else{if(i=="p_text"){(f!=="")?a(".ui-tabs-nav a:eq(0)").text(f):a(".ui-tabs-nav a:eq(0)").html("&nbsp;");var d=a.cleanTags(f,"span, em, u, blockquote, a, strong, i");(e.hasClass("f_folding"))?a(".folding-text",e).text(d.text()):a(":header",e).html(d.html())}else{if(i=="p_text_content"){var d=a.cleanTags(f,"span, b, strong, i, em, u, br, blockquote, a");var c=a.trim(d.html());(f!=="")?a(".ui-tabs-nav a:eq(0)").text(f):a(".ui-tabs-nav a:eq(0)").html("&nbsp;");a("p",e).remove();var g="";a.each(c.split("\n\n"),function(){g+="<p>"+this+"</p>"});a(".wrap",e).append(g)}}}}}}}}}}}}},spinner:function(d,f){var e=this;var c=e._form();if(f=="p_maximum"){a("input",c).attr("data-max",d);if(c.hasClass("f_slider")){e.refresh("f_slider",false)}else{a(".ui-spinner-input",c).spinner("option","max",d)}}else{if(f=="p_minimum"){a("input",c).attr("data-min",d);if(c.hasClass("f_slider")){e.refresh("f_slider",false)}else{a(".ui-spinner-input",c).spinner("option","min",d)}}else{if(f=="p_label_width"){c.not(".shrink, .top-align").find(".label").css("width",d)}else{if(f=="p_max_input"){a("input[type='text'], textarea",c).attr("maxlength",d)}else{if(f=="p_max_size"){a("input[type='file']",c).attr("file-maxsize",d)}else{if(f=="p_height"){d=(d=="")?"auto":d+"px";a(".wrap",c).css("min-height",d)}else{if(f=="p_width"){d=(d=="")?"auto":d+"px";a(".wrap",c).css("width",d)}else{if(f=="p_textarea_height"){a("textarea",c).css("height",d+"px")}else{if(f=="p_columns"){e.options_column(d)}else{if(f=="p_options_label"){a(".wrap span",c).css("width",d)}else{if(f=="p_font_size"){a(":header, p, li",c).css("font-size",d+"px")}else{if(f=="p_line_height"){a("p, li",c).css("line-height",d+"px")}else{if(f=="p_password_minimum_length"){a("input",c).attr("data-minlength",d)}}}}}}}}}}}}}},confirmation:function(){this.save("confirmation")},notification:function(){this.save("notification")},options_column:function(f){var h=this;var e=h._form();if(e.hasClass("f_radio")||e.hasClass("f_checkbox")){e.find("br").remove();var g=parseInt(f);if(f==1||f==""||f==0){e.find(".wrap label").after("<br>")}else{var c=parseInt(e.find(".wrap label").size()/g);for(var d=0;d<c;d++){e.find(".wrap label:eq("+(g-1)+")").after("<br>");g+=parseInt(f)}}e.find(".f_radio_wrap").removeAttr("class").addClass("f_radio_wrap wrap column["+f+"]");e.find(".f_checkbox_wrap").removeAttr("class").addClass("f_checkbox_wrap wrap column["+f+"]");if(f==""){e.find(".f_radio_wrap, .f_checkbox_wrap").removeClass("column[]")}}},tabs_style:function(e){var g=this;var f=g._form();var c=(f.size()>0)?'<li><a href="#tab-properties">'+f.find("label").text()+"</a></li>":'<li style="display: none;"><a href="#tab-properties">Properties</a></li>';var d='<div class="tabs" id="window-form_style">										<ul>											<li><a href="#tab-colors">Colors</a></li>											<li><a href="#tab-fonts">Fonts</a></li>											<li><a href="#tab-css">CSS Style</a></li>										</ul>										<div id="tab-colors"></div>										<div id="tab-fonts"></div>										<div id="tab-css"></div>									</div>';a("<div>").guifbox({title:"Form Style",status:"message",bgColor:"#FFFFFF",opacity:0,body:d,overlay:false,maxScreen:false,saveButton:false,cancelButton:false,confirmButton:false});a(".tabs").tabs({create:function(h,i){g.colors();a(".ui-tabs-anchor").blur()},activate:function(h,i){active=a(this).tabs("option","active");switch(active){case 0:g.colors();break;case 1:g.fonts();break;case 2:g.css();break}a(".ui-tabs-anchor").blur()}});return false},tabs_properties:function(f){var d=this;var m=this.options;var i=(f>=0)?false:true;var e=d._form();var k='<li id="tab-li-group"><a href="#tab-group">Group</a></li>';var j=(e.size()>0)?'<li id="tab-li-properties"><a href="#tab-properties">'+e.find(".label").text()+"</a></li>":'<li style="display: none;"><a href="#tab-properties">Properties</a></li>';var l='<li id="tab-li-options"><a href="#tab-options">Options</a></li>';var h='<li id="tab-li-items"><a href="#tab-items">Items</a></li>';var c='<li id="tab-li-html"><a href="#tab-html">HTML Source</a></li>';var g='<div class="tabs" id="window-properties">										<ul>											'+j+"											"+l+"											"+k+"											"+h+"											"+c+'										</ul>										<div id="tab-properties"></div>										<div id="tab-options"></div>										<div id="tab-group"></div>										<div id="tab-items"></div>										<div id="tab-html"></div>									</div>';if(i==false){a("<div>").guifbox({title:"Properties",status:"message",bgColor:"#FFFFFF",maxHeight:400,opacity:0,body:g,overlay:false,close:function(){a("#properties").removeClass("on")},create:function(){d.ui_tabs_properties(f)}})}else{d.ui_tabs_properties(f)}a(".ui-tabs-nav li, #tab-options, #tab-group, #tab-items, #tab-html").hide();a("#tab-li-properties").addClass("ui-tabs-active ui-state-active").show();a("#tab-properties").show();if(e.hasClass("f_html")){a("#tab-li-html").show()}if(e.hasClass("f_list")){a("#tab-li-items").show()}if(e.hasClass("f_button")||e.hasClass("f_select")||e.hasClass("f_checkbox")||e.hasClass("f_radio")){a("#tab-li-options").show()}if(a(".ui-sortable li.ui-draggable.active").hasClass("merge")){a("#tab-li-group").show()}(e.find(".label").text()!=="")?a(".ui-tabs-nav a:eq(0)").text(e.find(".label").text()):a(".ui-tabs-nav a:eq(0)").text(e.find(":header").text()||e.find("p").html());if(e.hasClass("f_submit")){a(".ui-tabs-nav a:eq(0)").text("Submit Button")}if(e.hasClass("f_list")){a(".ui-tabs-nav a:eq(0)").text("List")}if(e.hasClass("f_image")){a(".ui-tabs-nav a:eq(0)").text("Image")}if(e.hasClass("f_html")){a(".ui-tabs-nav a:eq(0)").text("HTML")}if(e.hasClass("f_page_break")){a(".ui-tabs-nav a:eq(0)").text("Page Break")}d.checked();return false},ui_tabs_properties:function(){var c=this;a("#window-properties.tabs").tabs({selected:0,active:0,create:function(d,e){switch(0){case 0:c.properties();c.get_properties();break;case 1:c.tab_options();break;case 2:c.tab_groups();break;case 3:c.tab_items();break;case 4:c.tabsHtml();break}},activate:function(d,e){active=a(this).tabs("option","active");switch(active){case 0:c.properties();c.get_properties();break;case 1:c.tab_options();break;case 2:c.tab_groups();break;case 3:c.tab_items();break;case 4:c.tabsHtml();break}a(".ui-tabs-anchor").blur()}})},tabsHtml:function(){var d=this._form();var c="<div><textarea id='html-source' style='width: 533px; height: 364px; resize: none;'></textarea></div>";a("#tab-html").html(c);a("#html-source").val(a(".wrap",d).html());this.checked()},get_properties:function(){var c=this;var d=c._form();var j=a("<div />").append(d.find(".label").html());j.find(".required").remove();j=a.cleanTags(j,"span, strong, i, u, em, blockquote");a("#p_text_label").val(j.html());if(a(".label",d).css("display")=="none"){a("[name=hide_label]").attr("checked","checked")}a("#p_item_id").text("#"+d.attr("id"));(d.hasClass("hidden"))?a("[name=p_visible]").attr("checked","checked"):a("[name=p_visible]").removeAttr("checked");(d.hasClass("none"))?a("[name=p_display]").attr("checked","checked"):a("[name=p_display]").removeAttr("checked");(d.find(".required").size()>0)?a("#required").addClass("on"):a("#required").removeClass("on");if(d.hasClass("f_heading")){var f=a.cleanTags(d.find(":header").html(),"span, em, u, blockquote, a, strong, i");var l=a.cleanTags(d.find(".sub-text").html(),"span, em, u, blockquote, a, strong, i");a("#p_text").val(f.html());a("#p_font_size").val(d.find(":header").css("font-size").replace("px",""));a("#p_fonts").val(d.find(":header").css("font-family"));a("#p_sub_text").val(l.html());a("[name=alignment][value="+a(".wrap",d).css("text-align")+"]").attr("checked","checked")}if(d.hasClass("f_letter")){var l="";a.each(d.find("p"),function(){l+=a(this).html()+"\n\n"});var g=a.cleanTags(l,"span, b, strong, i, em, u, br, blockquote, a");a("#p_text_content").val(g.html());a("#p_font_size").val(d.find("p").css("font-size").replace("px",""));a("#p_line_height").val(d.find("p").css("line-height").replace("px",""));a("#p_fonts").val(d.find("p").css("font-family"));a("[name=alignment][value="+a(".wrap",d).css("text-align")+"]").attr("checked","checked")}if(d.hasClass("f_list")){a("#p_font_size").val(d.find("li").css("font-size").replace("px",""));a("#p_fonts").val(d.find("li").css("font-family"));a("#p_line_height").val(d.find("li").css("line-height").replace("px",""));a("#p_list_type").val(d.find("ul").attr("class"))}if(d.hasClass("f_select")){a("#p_default_value").attr("value",d.find("select").attr("data-default"))}if(d.hasClass("f_text")){a("[name=validation][value="+a("input",d).attr("data-validation")+"]").attr("checked","checked");(a("input",d).attr("data-unique")=="true")?a("[name=p_unique_value]").attr("checked","checked"):a("[name=p_unique_value]").removeAttr("checked")}if(d.hasClass("f_text")||d.hasClass("f_phone")){a("#p_input_mask").val(d.find('input[type="text"]').attr("data-mask"))}if(d.find(".short-description").size()>0){var g=a.cleanTags(d.find(".short-description").html(),"span, b, strong, i, em, u, br, blockquote, a");a("#p_short_description").val(g.html())}if(d.hasClass("f_textarea")||d.hasClass("f_text")||d.hasClass("f_email")){a("#p_placeholder").attr("value",d.find("input[type='text'], textarea").attr("placeholder"));a("#p_default_value").attr("value",d.find("input[type='text'], select, textarea").attr("data-default"));a("#p_max_input").attr("value",d.find("input[type='text'], textarea").attr("maxlength"))}a("#p_width").val(a(".wrap",d).isAuto("width")?"auto":a(".wrap",d).outerWidth());(a(".wrap",d).css("min-height")=="0px")?a("#p_height").attr("value",a(".wrap",d).height()):a("#p_height").attr("value",a(".wrap",d).css("min-height").replace("px",""));if(d.hasClass("f_textarea")){a("#p_textarea_height").attr("value",a("textarea",d).css("height").replace("px",""))}if(d.hasClass("f_radio")||d.hasClass("f_checkbox")){var e=d.find(".f_radio_wrap, .f_checkbox_wrap").attr("class").split("[")[1];(e===b)?a("#p_columns").val(1):a("#p_columns").val(e.split("]")[0]);a("#p_options_label").val(d.find(".wrap label").innerWidth())}if(d.hasClass("f_password")){a("#p_password_minimum_length").val(a("input",d).attr("data-minlength"))}if(d.hasClass("f_confirm_password")){a("#p_compare_with").val(a("input",d).attr("data-compare"))}if(d.hasClass("shrink")){a("#p_label_width").attr("disabled","disabled");a("#p_label_width").val("");a("#p_label_width").spinner("option","disabled",true)}else{a("#p_label_width").removeAttr("disabled");a("#p_label_width").val(a(".label",d).outerWidth())}if(d.hasClass("f_spinner")||d.hasClass("f_slider")){a("#p_maximum").val(a("input",d).attr("data-max"));a("#p_minimum").val(a("input",d).attr("data-min"))}if(d.hasClass("f_file")){a("#p_max_size").val(a("input",d).attr("file-maxsize"));a("#p_file_extensions").val(a("input",d).attr("file-accept"));(a("input",d).attr("multiple")=="multiple")?a('[name="p_multiple_file"]').attr("checked","checked"):a('[name="p_multiple_file"]').removeAttr("checked")}if(d.hasClass("f_submit")){var i=a.cleanTags(d.find("button[type='submit']").html(),"span, strong, i, u");var h=a.cleanTags(d.find("button[type='reset']").html(),"span, strong, i, u");var k=a.cleanTags(d.find("button[type='submit']").attr("data-loader"),"span, strong, i, u");a("#p_submit_text").val(i.html());a("#p_reset_text").val(h.html());a("#p_loading_text").val(k.html());a(".p_submit_offset_value span").text(a(".wrap span",d).css("margin-left")),a("[name=submit_alignment][value="+a(".wrap",d).css("text-align")+"]").attr("checked","checked");if(a("button[type=reset]",d).size()>0){a(".clickinput[name=p_show_reset]").attr("checked","checked")}a("#p_submit_offset").slider({range:"max",min:0,value:a(".wrap span",d).css("margin-left").replace("px",""),max:d.width()-a(".wrap span",d).width(),start:function(n,o){var m=a(".wrap span",d).width();a(".wrap",d).css("text-align","");a("[name=submit_alignment]").removeAttr("checked");a(this).slider("option","max",d.width()-m)},slide:function(m,n){a(".p_submit_offset_value span").text(n.value+"px");a(".wrap span",d).css("margin-left",n.value-1)}})}a(".prop-value .button").buttonset()},code:function(){var c=this;var l=this.options;if(l.id){var j=guiBuilder.preview_url;var d=j+l.id;var h=j+"js/"+l.id;var f="<?php\n global $guiform;\n $guiform->printForm(1, array('responsive' => 'all'));\n?>";var k=0;a("#canvas .ui-sortable li.ui-draggable").each(function(){k+=a(this).outerHeight(true)});var e="";a.ajax({url:d,dataType:"HTML",type:"POST",success:function(m){m=m.replace(/\\/g,"");a("#code-source").text(a.trim(m))}});var i="";a.ajax({url:h,dataType:"HTML",type:"POST",success:function(m){m=m.replace(/\\/g,"");a("#code-javascript").text(a.trim(m))}});var g='<div id="window-code">											<h2>Form preview link!</h2>											<p>This a direct link for your form preview.</p>											<label><input id="ssl-link" type="checkbox">Secure form</label>											<input type="text" readonly="readonly" value="'+d+'">											<div id="window-code-list">												<h3>Wordpress</h3>												<div>													<p><strong>Short Code</strong></p>													<input type="text" readonly="readonly" value="[GuiForm id=&quot;'+l.id+'&quot; responsive=&quot;all&quot;]"> 													<br><br><p><strong>Php Code</strong></p>													<input type="text" readonly="readonly" value="&lt;?php echo do_shortcode(&quot;[GuiForm id=&#39;'+l.id+'&#39; responsive=&#39;all&#39;]&quot;); ?&gt;">													<br>													<br>													<p><strong>Admin Short Code</strong></p>													<textarea readonly="readonly">'+f+'</textarea>												</div>												<h3>EMBED</h3>												<div>													<textarea readonly="readonly"><script type="text/javascript" src="'+h+'"><\/script></textarea>												</div>												<h3>IFRAME</h3>												<div>													<textarea readonly="readonly"><iframe class="GuiFormIFrame" onload="window.parent.scrollTo(0,0)" allowtransparency="true" src="'+d+'" frameborder="0" style="width:100%; height: '+k+'px; border:none;" scrolling="no"></iframe></textarea>												</div>												<h3>Source Code</h3>												<div>													<pre><code><textarea style="height: 150px;" id="code-source" readonly="readonly">'+e+'</textarea></code></pre>												</div>												<h3>Javascript</h3>												<div>													<textarea style="height: 150px;" id="code-javascript" readonly="readonly">'+i+"</textarea>												</div>										</div>";a("<div>").guifbox({title:"Source Code",status:"message",opacity:0,body:g,width:550,overlay:false});a(function(){a("#window-code-list").accordion({heightStyle:"content"})});a("#ssl-link").click(function(){if(a(this).is(":checked")){a("#window-code").find("textarea, input").each(function(){var m=a(this).val()||a(this).html();a(this).val(m.replace(/http/g,"https"))})}else{a("#window-code").find("textarea, input").each(function(){var m=a(this).val()||a(this).html();a(this).val(m.replace(/https/g,"http"))})}})}else{c.save("code")}},data:function(){},getDoc:function(e){var d=null;try{if(e.contentWindow){d=e.contentWindow.document}}catch(c){}if(d){return d}try{d=e.contentDocument?e.contentDocument:e.document}catch(c){d=e.document}return d},save:function(i){var c=this;var o=this.options;var c=this;var i=i||false;var m=a(".ui-sortable .error").size()||0;var f=a(".ui-sortable .ui-draggable:not(.ui-sortable .ui-draggable.merge), .ui-sortable .merge-item");var g=a("#container").html();a("#save").addClass("saving");if(f.size()==0){a("#save").removeClass("saving");a("<div>").guifbox({title:"message",status:"message",body:'<p style="padding: 10px;">Build your form first.</p>'});return false}else{if(m>0){a("#save").removeClass("saving");a("<div>").guifbox({title:"error",status:"error",body:'<p style="padding: 10px;">An error occurred please check your form...</p>'});return false}else{var k={};var n=a.quoteAttr(a.trim(a("#formName").val()));var e=["f_submit"];c.uiDestroy();var g=a("<div />").append(a("#container").clone());a(".ui-resizable-handle",g).remove();a(".item",g).removeClass("restored-item");var l=a("<div />").append(a("#canvas").clone());a(l).find("#canvas").removeAttr("class").css({height:"",top:"",left:""});a(l).find("input, select, textarea").removeAttr("data-type");a(l).find(".active").removeClass("active");a(l).find(".item").removeAttr("style");a(l).find(".item").removeAttr("aria-disabled");a(l).find("#canvas").css({width:"100%","max-width":document.getElementById("canvas").offsetWidth-30});a(l).find("li").removeClass("ui-draggable").removeAttr("data-name data-type");a(l).find(".ui-sortable").css("min-height","").removeClass("ui-state-default ui-droppable ui-sortable");a(l).find(".ui-draggable").removeAttr("style data-name");a(l).find(".ui-resizable-handle").remove();var e=["list","heading","submit","letter"];var h=["spinner","button"];var d={};a.each(h,function(){d[this]=(a(g).find(".f_"+this).size()>0)?1:0});a.each(f,function(){var v=this.className.split("f_")[1].split(" ")[0];if(a.inArray(v,e)==-1){var r=a(this).attr("data-name");var u=this.className.match(/(\bf_)\S*/g);var q=a(".label",this).text().replace("*","");var p=a(this).attr("data-type");var w=(a(".required",this).size()>0)?true:false;k[this.id]={name:r,type:u[0],label:q,properties:{dataType:p},validation:{required:w}};if(u=="f_email"){k[this.id].validation.text=a("input",this).attr("class").split("[")[1].split("]")[0];k[this.id].validation.unique=true}else{if(u=="f_text"){var s=a("input",this).attr("maxlength");k[this.id].validation.text=a("input",this).attr("data-validation");k[this.id].validation.maxlength=(s===b||s<=0)?false:parseInt(s);k[this.id].validation.unique=(a("input",this).attr("data-unique")=="true")?true:false}else{if(u=="f_file"){k[this.id].validation.extension=a.map(a("input",this).attr("file-accept").split(","),function(x){return a.trim(x)});k[this.id].validation.maxsize=a("input",this).attr("file-maxsize");k[this.id].properties.multiple=a("input",this).hasAttr("multiple")?true:false}else{if(u=="f_password"){k[this.id].validation.minimum_length=(parseInt(a("input",this).attr("data-minlength"))>2)?2:parseInt(a("input",this).attr("data-minlength"))}else{if(u=="f_confirm_password"){k[this.id].validation.compare=a("input",this).attr("data-compare")}else{if(u=="f_spinner"){k[this.id].validation.max_value=a("input",this).hasAttr("data-max")?parseInt(a("input",this).attr("data-max")):"";k[this.id].validation.min_value=a("input",this).hasAttr("data-min")?parseInt(a("input",this).attr("data-min")):""}}}}}}if(u=="f_select"||u=="f_checkbox"||u=="f_radio"){var t=(u=="f_select")?"select option":"input";k[this.id].validation.array=a.map(a(t,this),function(x){return a.trim(x.value)})}}});var k={title:n,data:k,include:d,canvas:encodeURIComponent(g.html()),html:encodeURIComponent(l.html()),id:o.id};var j=a("<iframe />",{name:"saveForm",style:" width: 100%; height : 400px;",src:"javascript:false;"}).prependTo("body").hide();a("<form />",{name:"saveForm",id:"saveForm",src:"javascript:false;",action:ajaxurl,method:"POST",target:"saveForm"}).append('<input type="text" name="action" value="guiform-save-form">										 <input type="text" name="guiform_nonce" value="'+guiBuilder.nonce+'">										 <textarea name="data">'+JSON.stringify(k)+'</textarea>										 <input name="guiform_save_form" type="submit" value="post">').prependTo("body").hide();a.when(c.resetSaving(),a("#saveForm input[type=submit]").click()).then(j.load(function(v){var u=c.getDoc(j[0]);var s=u.body?u.body:u.documentElement;a("iframe[name=saveForm], form[name=saveForm]").remove();var t=a.parseJSON(s.innerHTML);o.id=t.id;a("#save").removeClass("saving");if(t.status=="error"){a("<div>").guifbox({title:t.status,status:t.status,body:'<p style="padding: 10px;">'+t.message+"</p>"})}else{if(i=="preview"){var r=a("#containment").innerWidth();var p=a("body").height()-80;o.screenPreview=r;var q=ajaxurl+"?action=guiform-form-preview&nonce="+guiBuilder.nonce+"&height="+p+"&width="+(r-30)+"&id="+t.id;tb_show("Form Preview",q);a.when(a("#window-preview").attr("href",guiBuilder.preview_url+t.id).trigger("click")).then(function(x,y,w){timeout=setTimeout(function(){a("#TB_window iframe").contents().find("#responsive-style").remove();clearTimeout(timeout)},800)});a("#guifbox").remove();a("#thickbox-preview").attr("href",q).trigger("click")}else{if(i=="notification"||i=="confirmation"){location.href=guiBuilder.guiform_url+"&tab="+i+"&form="+t.id}else{if(i=="code"){c.code()}else{if(i=="autosave"){return false}else{a("<div>").guifbox({title:"message",status:"message",body:'<p style="padding: 10px;">'+t.message+"</p>"})}}}}}}))}}},uiDestroy:function(){a("#canvas .button").buttonset("destroy");a("#canvas .ui-spinner-input").spinner("destroy")},resetSaving:function(){var c=this;c.autoSave();c.refresh("f_button",true);c.refresh("f_spinner",true)},create:function(){location.href=location.href.split("&")[0]},preview_screen:function(d){var c=[this.options.screenPreview,240,320,480];var e=c[d]/2;if(d==0){a("#TB_window iframe").contents().find("#responsive-style").remove()}else{if(d>0&&d<4){a("#TB_window iframe").contents().find("#responsive-style, .error-message").remove();a("#TB_window iframe").contents().find("head").append('<link id="responsive-style" media="all" type="text/css" href="'+guiBuilder.plugins_url+'assets/css/responsive.css" rel="stylesheet">')}else{a("#window-preview").get(0).click()}}a("#TB_window").animate({marginLeft:-e,width:c[d]},400)},preview:function(){(a("#ui-sortable .ui-draggable").size()>0)?alert("Create your form first."):this.save("preview")},merge:function(e,f){var d=this;var g=this;if(a("#canvas .ui-draggable.selected").size()<2){a("<div>").guifbox({title:"message",status:"message",body:'<p style="padding: 10px;">Select atleast two item by holding down CTRL + Left Click to the field.</p>'})}else{var c=a("<div />");g.uiDestroy();a("#canvas .selected:not(#canvas .merge), #canvas .selected .merge-item").each(function(){a(this).removeClass("merge-item");var k=a(this).attr("class");var j=a(this).attr("id");var h=a(this).attr("data-name");var i=a.quoteAttr(a(this).attr("data-type"),"'");a(c).append("<div id='"+j+"' data-type='"+i+"' data-name='"+h+"' class='merge-item "+k+"'>"+a(this).html()+"</div>")});a(c).find(".selected").removeClass("selected ui-draggable");a("#canvas .selected:eq(0)").attr("id","item-merge-"+String(Math.random()).substring(2,8));a("#canvas .selected:eq(0)").removeClassRegEx(/^f_/).removeAttr("data-name");a("#canvas .selected:eq(0)").removeClass("shrink");a("#canvas .selected:eq(0)").html(c.html()).removeClass("selected").addClass("active merge");a("#canvas .active.merge").find(".merge-item:eq(0)").addClass("active");a("#canvas .selected").remove();g.resetSaving();g.tabs_properties()}d.checked()},remove:function(f,e){var d;var j=this;f=(f==false)?false:true;var h=a(".ui-sortable li.ui-draggable.active");var g=a(".ui-sortable .ui-draggable.merge.active");if(e!==b){d=e;h=(h.find(".merge-item.active").size()>0)?a(".ui-sortable li.ui-draggable.active .merge-item.active"):a(".ui-sortable li.ui-draggable.active");h.removeClass("active")}else{if(h.hasClass("merge")){d=(h.find(".merge-item.active").size()>0)?a(".ui-sortable li.ui-draggable.active .merge-item.active"):a(".ui-sortable li.ui-draggable.active")}else{d=a("#canvas .ui-draggable.active")}}var c=(h.hasClass("merge"))?a(".ui-sortable .ui-draggable.merge.active").index(d):a(".ui-sortable .ui-draggable").index(d);if(a(".ui-sortable li.ui-draggable.active").hasClass("merge")){var i=a(".ui-sortable .merge.active .merge-item").size()-1}else{var i=a(".ui-sortable .ui-draggable").size()-1}if(d.size()>0){d.addClass("removed-item");d.slideUp(800,function(){if(a(".ui-sortable li.ui-draggable.active").hasClass("merge")&&a(this).parent().find(".item").size()==1){a(this).parent().remove()}a(this).remove();if(a(".ui-sortable li.ui-draggable.active").hasClass("merge")){if(c<i){a(".ui-sortable .merge.active .merge-item:eq("+c+")").addClass("active")}else{if(i==0){a(".ui-sortable .merge.active").remove();a(".ui-sortable .ui-draggable:eq("+c+")").addClass("active");if(a(".ui-sortable li.ui-draggable.active").hasClass("merge")){a(".ui-sortable .merge.active .merge-item:eq(0)").addClass("active")}}}}else{if(c<i){a(".ui-sortable .ui-draggable:eq("+c+")").addClass("active")}else{a(".ui-sortable .ui-draggable:eq(0)").addClass("active")}if(a(".ui-sortable li.ui-draggable.active").hasClass("merge")){a(".ui-sortable .merge.active .merge-item:eq(0)").addClass("active")}}if(a("#window-properties").size()!==0){if(a(".ui-sortable li").size()==0){a("#guifbox").remove()}else{if(f){j.tabs_properties()}}}if(f&&a("#canvas .item").size()>0){j.properties();j.get_properties()}j.checked()})}return false},required:function(d,e){var f=this;var c=f._form();if(c.size()>0&&c.hasClass("f_submit")==false){if(a(e).hasClass("on")){c.find(".required").remove();a(e).removeClass("on")}else{c.find(".label").append("<span class='required'>*</span>");a(e).addClass("on")}}},color_picker:function(){var c=this;a(".basic").spectrum({showInput:true,appendTo:"parent",chooseText:"Ok",showInitial:true,showAlpha:true,allowEmpty:true,preferredFormat:"hex6",beforeShow:function(e){var i=this.id;var g=a("#guiform-style").text().replace(/\s\s+/g,"");var d=g.split("background-color:")[1].split(";")[0];var f=g.split(".label{color:")[1].split(";")[0];var h=g.split("border:")[1].split(";")[0].split(" ")[3];if(i=="color"){a(this).spectrum("set",f)}if(i=="borderColor"){a(this).spectrum("set",h)}if(i=="backgroundColor"){a(this).spectrum("set",d)}},show:function(d){var e=this.id;d=(d==null)?"rgba(255, 255, 255, 0.01)":d;c.setColors(e,d)},dragstop:function(f,d){var g=this.id;d=(d==null)?"rgba(255, 255, 255, 0.01)":d;c.setColors(g,d)},change:function(d){var e=this.id;d=(d==null)?"rgba(255, 255, 255, 0.01)":d;c.setColors(e,d)}})},setColors:function(h,d){var f=a("#guiform-style").text().replace(/\s\s+/g,"");if(h=="color"){var e=f.split(".label{color: ")[1].split(";")[0];a("#guiform-style").text(a("#guiform-style").text().replace(e,d))}else{if(h=="backgroundColor"){var c=f.split("background-color: ")[1].split(";")[0];a("#guiform-style").text(a("#guiform-style").text().replace(c,d))}else{if(h=="borderColor"){var g=f.split("border: ")[1].split(";")[0].split(" ")[2];a("#guiform-style").text(a("#guiform-style").text().replace(g,d))}}}},colors:function(e,f){a("#header li").removeClass("on");a("#header #colors").addClass("on");var h=a("#guiform-style").text().replace(/\s\s+/g,"");var c=h.split("background-color:")[1].split(";")[0];var g=h.split(".label{color:")[1].split(";")[0];var i=h.split("border:")[1].split(";")[0].split(" ")[3];var d="<table cellspacing='0' cellpadding='4'>										<tbody>											<tr>												<td class='prop-label' style='width: 75%; font-weight: normal;'>Background Color</td>												<td class='prop-value' align='center'><input type='text' id='backgroundColor' class='basic' value='"+c+"' /></td>											</tr>											<tr>												<td class='prop-label' style='font-weight: normal;'>Label Color</td>												<td class='prop-value' align='center'><input type='text' id='color' class='basic' value='"+g+"' /></td>											</tr>											<tr>												<td class='prop-label' style='font-weight: normal;'>Border Color</td>												<td class='prop-value' align='center'><input type='text' id='borderColor' class='basic' value='"+i+"' /></td>											</tr>										</tbody>									</table>";a(".tabs #tab-colors").html(d);this.color_picker();this.checked()},fonts:function(e,f){a("#header li").removeClass("on");a("#header #fonts").addClass("on");var c=a("#guiform-style").text();c=c.split("font-family: ")[1].split(";")[0];var d="<div id='fonts-container' class='wrapper'><ul class='list'>";a.each(a.guiform.Fonts,function(g,h){if(c.split(",")[0].replace(/['", ]/g,"")==h.split(",")[0].replace(/['", ]/g,"")){d+="<li class='list active' style='font-family: "+h+";' data-value='"+h+"'>"+g+"</li>"}else{d+="<li class='list' style='font-family: "+h+";' data-value='"+h+"'>"+g+"</li>"}});d+="</ul></div>";a(".tabs #tab-fonts").html(d);this.checked()},font_property:function(){var e=this._form();var d="<select name='' id='p_fonts'>";var c=e.find(":header, p, li").css("font-family");a.each(a.guiform.Fonts,function(f,g){if(c.replace(/'/g,"")==f.replace(/'/g,"")){d+="<option selected='selected' style='font-family: "+g+";' data-value='"+g+"'>"+f+"</option>"}else{d+="<option style='font-family: "+g+";' data-value='"+g+"'>"+f+"</option>"}});d+="</select>";return d},css:function(d,e){var c="<div><p>Start your CSS code with <strong>#canvas</strong> selector.</p><textarea id='guiform-canvas'></textarea></div>";a(".tabs #tab-css").html(c);a(this.element[0]).addClass("guiEditable").attr("contenteditable",true).css({});if(a("#guiform-form").size()==0){a("<style type='text/css' id='guiform-form' media='all' scoped></style>").insertAfter("#guiform-style")}else{a("#guiform-canvas").val(a("#guiform-form").text())}this.checked()},properties:function(e,f){var c;var g=this;var d=g._form();if(d.hasClass("f_button")||d.hasClass("f_select")||d.hasClass("f_checkbox")||d.hasClass("f_radio")){a("#tab-li-options").show()}else{a("#tab-li-options").hide()}a(".ui-sortable li.ui-draggable.active").hasClass("merge")?a("#tab-li-group").show():a("#tab-li-group").hide();if(d.hasClass("f_heading")){c=["Item ID","Visibility","Display","Text","Sub Text","Text Alignment","Font Family","Font Size","Layout"]}else{if(d.hasClass("f_letter")){c=["Item ID","Visibility","Display","Text Content","Text Alignment","Font Family","Font Size","Line Height","Layout"]}else{if(d.hasClass("f_list")){c=["Item ID","Visibility","Display","List Type","Font Family","Font Size","Line Height","Layout"]}else{if(d.hasClass("f_text")){c=["Item ID","Visibility","Display","Label","Display Label","Input Mask","Unique Value","Label Width","Default Value","Placeholder","Short Description","Validation","Maximum Input","Layout"]}else{if(d.hasClass("f_textarea")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Placeholder","Default Value","Short Description","Layout","Textarea Height"]}else{if(d.hasClass("f_select")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Default Value","Short Description","Layout"]}else{if(d.hasClass("f_radio")||d.hasClass("f_checkbox")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Option Columns","Options Text Width","Layout"]}else{if(d.hasClass("f_submit")){c=["Item ID","Visibility","Display","Submit Text","Reset Text","Loading Text","Submit Alignment","Show Reset Button","Offset","Layout"]}else{if(d.hasClass("f_file")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Short Description","Allow Multiple Upload","File Extentions","Max File Size","Layout"]}else{if(d.hasClass("f_password")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Short Description","Layout","Password Minimum Length"]}else{if(d.hasClass("f_confirm_password")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Short Description","Compare With","Layout"]}else{if(d.hasClass("f_spinner")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Short Description","Maximum Value","Minimum Value","Layout"]}else{if(d.hasClass("f_phone")){c=["Item ID","Visibility","Display","Label","Display Label","Input Mask","Label Width","Short Description","Layout"]}else{if(d.hasClass("f_email")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Placeholder","Default Value","Short Description","Maximum Input","Layout"]}else{if(d.hasClass("f_button")){c=["Item ID","Visibility","Display","Label","Display Label","Label Width","Short Description","Layout"]}}}}}}}}}}}}}}}this.buildProperties(c);this.checked()},tab_groups:function(){var f=this;var e=a(".ui-sortable .merge.active");var d="";e.find(".merge-item").each(function(){var h=this.id;var g="";if(a(this).find(".label").size()>0){g=a(this).find(".label").text()}else{if(a(this).hasClass("f_list")){g="List"}else{if(a(this).hasClass("f_submit")){g="Submit Butto"}else{if(a(this).hasClass("f_heading")){g="Header"}else{if(a(this).hasClass("f_image")){g="Image"}else{if(a(this).hasClass("f_letter")){g="Letter"}}}}}}d+="<li id='li-"+h.split("-")[1]+"' class='clearfix'>				          <span class='label'>"+g+"</span>									<span data-icon='&#xe08c;' class='move'></span>									<span data-icon='&#xe093;' class='delete'></span>								 </li>"});a("#tab-group").html("<ul id='group-list'>"+d+"</ul>");var c;a("#group-list").sortable({axis:"y",forcePlaceholderSize:true,forceHelperSize:true,opacity:0.9,scroll:true,handle:".move",scrollSensitivity:5,scrollSpeed:5,placeholder:"ui-state-highlight",revert:true,tolerance:"pointer",beforeStop:function(g,k){c=a(k.helper).index();var i=a(".ui-sortable .merge.active");var h="item-"+a(k.item).attr("id").split("-")[1];if(a("#"+h).hasClass("f_spinner")){a("#"+h).find(".ui-spinner-input").spinner("destroy")}if(a("#"+h).hasClass("f_button")){a("#"+h).find(".button").buttonset("destroy")}var m=i.find("#"+h).clone();var o=a("#group-list li").size();i.find("#"+h).remove();(c==(o-2))?i.append(m):a("div.merge-item:eq("+c+")",i).before(m);if(a("#"+h).hasClass("f_spinner")){var l=a("#"+h).find(".ui-spinner").attr("data-max");var j=a("#"+h).find(".ui-spinner").attr("data-min");a("#"+h).find(".ui-spinner").spinner({max:l,min:j})}if(a("#"+h).hasClass("f_button")){a("#"+h).find(".button").buttonset()}if(a("#"+h).hasClass("f_phone")){var n=a("#"+h).find("input").attr("data-mask");a("#"+h).find("input").mask(n)}}});a(document).on("click","#group-list .delete",function(){var g=a(this).parent();g.slideUp("slow",function(){a(this).remove()});a(".merge-item:eq("+g.index()+")",e).hide("slow",function(){a(this).remove();if(a(".merge-item",e).size()==0){f.remove(true)}})});this.checked()},tab_items:function(){var g=this;var e=g._form();var c="";c+="<ul id='items-list'>";e.find("li").each(function(){var h=this.innerHTML;c+="<li class='clearfix'>				          <span class='label'><input class='items-list-li' type='text' value='"+h+"'></span>									<span data-icon='&#xe08c;' class='move'></span>									<span data-icon='&#xe004;' class='add'></span>									<span data-icon='&#xe093;' class='delete'></span>								 </li>"});c+="</ul>";c+='<div style="text-align: right; margin-bottom: 10px;">								<a onclick="return false;" href="javascript:void(0);" class="button-primary" id="save-items">Save</a>							</div>';a("#tab-items").html(c);var d;var f;a("#items-list").sortable({axis:"y",forcePlaceholderSize:true,forceHelperSize:true,opacity:0.9,scroll:true,handle:".move",scrollSensitivity:5,scrollSpeed:5,placeholder:"ui-state-highlight",revert:true,tolerance:"pointer"});a(document).on("click","#items-list .delete",function(){var h=a(this).parent();h.slideUp("slow",function(){a(this).remove()})}).on("click","#items-list .add",function(){var h=a("#items-list li").index(a(this).parent());var i="<li class='clearfix'>					          <span class='label'><input class='items-list-li' type='text' value='Lorem ipsum dolor sit amet, consectetur adipisicing elit.'></span>										<span data-icon='&#xe08c;' class='move'></span>										<span data-icon='&#xe004;' class='add'></span>										<span data-icon='&#xe093;' class='delete'></span>									 </li>";a("#items-list li:eq("+h+")").after(i);a("#items-list .selected").slideDown("slow",function(){a(this).removeClass("selected")})});this.checked()},tab_options:function(){var h=this;var f=h._form();var e="";if(f.hasClass("f_select")){f.find("select option").each(function(){var j=a(this).attr("value");var k=a(this).html();var i=(a(this).is(":selected"))?'<input checked="checked" type="radio" name="checked">':'<input type="radio" name="checked">';if(j==k){e+="<li>"+i+'<input type="text" name="label" value="'+j+'">												<input type="text" name="value" value="'+j+'">												<span data-icon="&#xe08c;" class="move"></span>											  <span data-icon="&#xe004;" class="add"></span>											  <span data-icon="&#xe093;" class="delete"></span>											</li>'}else{e+="<li>"+i+'<input type="text" name="label" value="'+k+'">												<input type="text" name="value" value="'+j+'">												<span data-icon="&#xe08c;" class="move"></span>											  <span data-icon="&#xe004;" class="add"></span>											  <span data-icon="&#xe093;" class="delete"></span>											</li>'}})}if(f.hasClass("f_button")){a("input",f).each(function(){var k=a("<div>");var j=a(this).val();var l=a(this).parent().find("label[for='"+a(this).attr("id")+"'] .ui-button-text").html();var i=(a(this).is(":checked"))?'<input checked="checked" type="radio" name="checked">':'<input type="radio" name="checked">';if(j==l){k.append("<li>"+i+'<input type="text" name="label" value="">														<input type="text" name="value" value="'+j+'">														<span data-icon="&#xe08c;" class="move"></span>											      <span data-icon="&#xe004;" class="add"></span>											      <span data-icon="&#xe093;" class="delete"></span>													 </li>')}else{k.append("<li>"+i+'<input type="text" name="label" value="">													<input type="text" name="value" value="'+j+'">													<span data-icon="&#xe08c;" class="move"></span>										      <span data-icon="&#xe004;" class="add"></span>										      <span data-icon="&#xe093;" class="delete"></span>											 	</li>')}k.find("input[name='label']").attr("value",l);e+=k.html()})}if(f.hasClass("f_radio")||f.hasClass("f_checkbox")){var d="";a.each(a(".wrap label",f),function(){var j=a("input",this).val();var k=a("span",this).text();var i=(a(this).find("input").is(":checked"))?'<input checked="checked" type="radio" name="checked">':'<input type="radio" name="checked">';if(j==k){e+="<li>"+i+'<input type="text" name="label" value="'+j+'">												<input type="text" name="value" value="'+j+'">												<span data-icon="&#xe08c;" class="move"></span>											  <span data-icon="&#xe004;" class="add"></span>											  <span data-icon="&#xe093;" class="delete"></span>											</li>'}else{e+="<li>"+i+'<input type="text" name="label" value="'+k+'">												<input type="text" name="value" value="'+j+'">												<span data-icon="&#xe08c;" class="move"></span>											  <span data-icon="&#xe004;" class="add"></span>											  <span data-icon="&#xe093;" class="delete"></span>											</li>'}})}var c='<ul id="visual-text"><li class="active">Visual</li></ul>';c+='<table cellspacing="0" cellpadding="4">		  				 <thead><tr>									<th style="width: 160px;">Options</th>									<th style="width: 197px;">Label</th>									<th style="border-right: medium none;">Value</th>									<th style=""></th>							 </tr></thead>';c+='<tr><td style="padding: 0px;"><ul id="bulk-options">';var g=f.hasClass("f_button")?this.options.Icons:this.options.Options;a.each(g,function(i,j){c+="<li>"+i+"</li>"});c+='</ul></td><td colspan="3" style="vertical-align: top;padding: 0px;">								 <ul id="options-list">'+e+"</ul>							 </td></tr></table>";c+='<div style="text-align: right;">								<a onclick="return false;" href="javascript:void(0);" class="button-primary" id="clear-options">Clear Options</a>								<a onclick="return false;" href="javascript:void(0);" class="button-primary" id="save-options">Save</a>							</div>';a("#tab-options").html(c);a("#options-list").sortable({axis:"y",forcePlaceholderSize:true,forceHelperSize:true,opacity:0.9,scroll:true,handle:".move",scrollSensitivity:5,scrollSpeed:5,placeholder:"ui-state-highlight",revert:true,tolerance:"pointer"});this.checked()},rebuild_options:function(){var e=this;var d=e._form();e.build_options();if(d.hasClass("f_radio")||d.hasClass("f_checkbox")){var c=d.find(".f_radio_wrap, .f_checkbox_wrap").attr("class").split("[")[1];c=(c===b)?1:c.split("]")[0];e.options_column(c)}},build_options:function(){var e="";var d=this.options;var h=this;var f=h._form();var c=a(".ui-sortable li.ui-draggable.active").attr("data-name");var g=a("select, input",f).attr("data-type");a("#options-list li").each(function(){var i=a.trim(a('input[name="label"]',this).val());var k=a('input[name="value"]',this).val();var j=a('input[name="checked"]',this).is(":checked");k=a.trim(k.replace(/<\/?[^>]+(>|$)/g,""));k=a.quoteAttr(k);j=(j)?'checked="checked"':"";if(f.hasClass("f_select")){j=(j)?'selected="selected"':"";e+="<option "+j+" value='"+k+"'>"+i+"</option>";f.find("select").html(e)}if(f.hasClass("f_radio")){e+="<label><input "+j+" data-type='"+g+"' name='"+c+"' type='radio' value='"+k+"'><span>"+i+"</span></label>";f.find(".f_radio_wrap").html(e)}if(f.hasClass("f_checkbox")){e+="<label><input "+j+" data-type='"+g+"' name='"+c+"[]' type='checkbox' value='"+k+"'><span>"+i+"</span></label>";f.find(".f_checkbox_wrap").html(e)}if(f.hasClass("f_button")){var l="button-"+String(Math.random()).substring(2,8);e+="<input id='"+l+"' type='radio' "+j+" value='"+k+"' name='"+c+"' /><label for='"+l+"'>"+i+"</label>"}});if(f.hasClass("f_button")){e=a("<div class='button'>").append(e);f.find(".wrap").html(e.clone());f.find(".button").buttonset()}alert("Save options!")},buildProperties:function(e){var f=this;var d=f._form();var c="";c+='<table cellspacing="0" cellpadding="4">';a.each(e,function(){c+="<tr><td style='width:200px;' class='prop-label'><p class='prop-text'>"+this+"</p>";c+=(f.options.Properties[this][1]!="")?"<div class='prop-hint'>"+f.options.Properties[this][1]+"</p>":"";c+="</td><td class='prop-value'>"+((this=="Font Family")?f.font_property():f.options.Properties[this][0])+"</td><tr>"});c+="</table>";a("#tab-properties").html(c);a(".prop-spinner").each(function(){var h=a(this).attr("data-min")||a(this).attr("data-default");var g=a(this).attr("data-max")||null;a(this).spinner({min:h,max:g,numberFormat:"n"})});a("#header li").removeClass("on");a("#header #properties").addClass("on");if(d.hasClass("f_confirm_password")){a("#p_compare_with").append("<option value=''></option>");a("#canvas .f_password").each(function(){a("#p_compare_with").append("<option value='"+a("input",this).attr("name")+"'>"+a(".label",this).text()+"</option>")})}this.checked()},checked:function(){var c=this._form();(c.find(".required").size()>0)?a("#required").addClass("on"):a("#required").removeClass("on");(c.size()>0)?a("#delete").addClass("on"):a("#delete").removeClass("on")}})}(jQuery));(function(){var b=jQuery;var a={focus:null,id:guiform.id||null,title:guiform.title,sortingItem:false,draggingItem:false,dragItem:null,dragItemID:null,canvasHeight:function(){if(b.browser.name()=="chrome"||b.browser.name()=="opera"){return screen.height-300}if(b.browser.name()=="firefox"||b.browser.name()=="safari"){return screen.height-340}if(b.browser.name()=="msie"){return screen.height-290}},maxInputHeight:500,activeProperties:false,Container:{parent:b("<div id='#GuiForm'></div>"),canvas:b("<div id='canvas'></div>"),container:b("<div id='container'></div>"),containment:b("<div id='containment'><ul id='sortable' class='clearfix'></ul></div>"),tools:b("<div id='tools'></div>"),contextMenu:b("<div id='contextMenu'></div>")},Selector:{parent:b("#GuiForm"),toolLi:b("#tools li"),active:b("#canvas .active"),contextMenu:b("#contextMenu")},Tag:{tools:"<div class='tools'></div>",property:"<div id='property'></div>",propertyContent:"<div class='content'></div>"},Tools:{form:{"Form Tools":{t_text:["Text Box","&#xe07b;"],t_textarea:["Text Area","&#xe072;"],t_select:["Drop Down","&#xe042;"],t_radio:["Radio Button","&#xe069;"],t_checkbox:["Check Box","&#xe06a;"],t_file:["File Upload","&#xe008;"],t_password:["Password","&#xe075;"],t_confirm_password:["Confirm Password","&#xe075;"],t_submit:["Submit Button","&#xe07c;"]},"Display Tools":{t_heading:["Heading","<strong>H</strong>"],t_letter:["Text","&#xe0d6;"],t_list:["List","&#xe001;"]},"Quick Tools":{t_phone:["Phone Number","&#xe04e;"],t_email:["Email Address","&#xe01a;"],t_spinner:["Spinner","&#xe041;"],t_button:["Button","&#xe0b9;"]}}},Form:{heading:["<div class='wrap'><h1>Heading</h1></div>"],letter:['<div class="wrap"><p>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</p></div>'],list:['<div class="wrap">																				<ul>																					<li>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>																					<li>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>																					<li>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>																					<li>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>																					<li>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>																				</ul>																			</div>'],text:["<label class='label'>Text Box</label><div class='wrap' style='width: 250px;'><input type='text' data-validation='none'></div>","VARCHAR(150) NOT NULL DEFAULT ''"],textarea:["<label class='label'>Text Area</label><div class='wrap' style='width: 250px;'><textarea></textarea></div>","MEDIUMTEXT NOT NULL DEFAULT ''"],select:["<label class='label'>Drop Down</label>																			<div class='wrap' style='width: 250px;'>																				<select name=''>																					<option value='Option 1'>Option 1</option>																					<option value='Option 2'>Option 2</option>																					<option value='Option 3'>Option 3</option>																				</select>																			</div>","VARCHAR(150) NOT NULL DEFAULT ''"],radio:["<label class='label'>Radio Button</label>																			<div class='f_radio_wrap wrap' style='width: 250px;'>																				<label><input type='radio' value='Option 1'><span>Option 1</span></label><br>																				<label><input type='radio' value='Option 2'><span>Option 2</span></label><br>																				<label><input type='radio' value='Option 3'><span>Option 3</span></label><br>																			</div>","VARCHAR(150) NOT NULL DEFAULT ''"],checkbox:["<label class='label'>Check Box</label>																			<div class='f_checkbox_wrap wrap' style='width: 250px;'>																				<label><input type='checkbox' value='Option 1'><span>Option 1</span></label><br>																				<label><input type='checkbox' value='Option 2'><span>Option 2</span></label><br>																				<label><input type='checkbox' value='Option 3'><span>Option 3</span></label><br>																			</div>","TINYTEXT NOT NULL DEFAULT ''"],file:["<label class='label'>File Upload</label>										 		  						<div class='wrap' style='width: 250px;'>										 		  							<input type='file' file-maxsize='5' file-accept='jpg, jpeg, png, gif'>										 		  						</div>										 		  						<div class='gui-files'></div>","TEXT NOT NULL DEFAULT ''"],submit:["<div class='wrap'><span><button type='submit' name='submit' disabled='disabled' data-loader='Loading'>Submit</button></span></div>",""],password:["<label class='label'>Password<span class='required'>*</span></label><div class='wrap' style='width: 250px;'><input type='password'></div>","VARCHAR(255) NOT NULL DEFAULT ''"],confirm_password:["<label class='label'>Confirm Password<span class='required'>*</span></label><div class='wrap' style='width: 250px;'><input type='password'></div>",""],spinner:["<label class='label'>Text Label</label><div class='wrap' style='width: 110px;'><input class='ui-spinner' type='text'></div>","VARCHAR(150) NOT NULL DEFAULT ''"],phone:["<label class='label'>Phone Number</label><div class='wrap' style='width: 250px;'><input data-mask='(###) ###-####' type='text'></div>","VARCHAR(150) NOT NULL DEFAULT ''"],email:["<label class='label'>Email Address<span class='required'>*</span></label><div class='wrap' style='width: 250px;'><input class='validation[email]' data-unique='true' placeholder='ex: info@email.com' type='text'></div>","VARCHAR(150) NOT NULL DEFAULT ''"],button:["<label class='label'>Text Label</label>																			<div class='wrap'>																				<div class='button'>																					<input type='radio' value='1' /><label>On</label>																					<input type='radio' value='0' /><label>Off</label>																				</div>																			</div>","VARCHAR(150) NOT NULL DEFAULT '0'"]},Context:{menu:{c_nextLineOn:"<li><span id='c_nextLineOn'>Next Line On</span></li>",c_nextLineOff:"<li><span id='c_nextLineOff'>Next Line Off</span></li>",c_shrink:"<li><span id='c_shrink'>Shrink</span></li>",c_expand:"<li><span id='c_expand'>Expand</span></li>",c_blockLine:"<li><span id='c_blockLine'>Block Display</span></li>",c_floatLine:"<li><span id='c_floatLine'>Inline Display</span></li>",c_delete:"<li><span id='c_delete'>Delete</span></li>",g_blockLine:"<li><span id='g_blockLine'>Group: Block Display</span></li>",g_floatLine:"<li><span id='g_floatLine'>Group: Inline Display</span></li>",g_nextLineOn:"<li><span id='g_nextLineOn'>Group: Next Line On</span></li>",g_nextLineOff:"<li><span id='g_nextLineOff'>Group: Next Line Off</span></li>"}}};a.htmlTools=function(){b(this.Selector.parent).append(b(this.Container.tools));b.each(this.Tools.form,function(d,e){var c="";c+="<h3>"+d+"</h3>";c+="<ul>";b.each(a.Tools.form[d],function(f,h){var i=h[0];var g=h[1];if(f=="t_heading"){c+="<li id='"+f+"'><span class='icon'>"+g+"</span><span class='text'>"+i+"</span></li>"}else{c+="<li id='"+f+"'><span class='icon' data-icon='"+g+"'></span><span class='text'>"+i+"</span></li>"}});c+="</ul>";b(a.Container.tools).append(c)})};a.htmlCanvas=function(){if(guiBuilder.canvas!==null){b("#GuiForm").append(guiBuilder.canvas.replace(/\\/g,""));b("#guiform-notice").remove();b("#canvas ul.ui-sortable").attr("id","sortable")}else{b("#GuiForm").append(b(this.Container.container));b("#container").append(b(this.Container.canvas));b("#canvas").html(b(this.Container.containment))}var c='<div id="guiform-notice">									<h1>Make a Donation</h1>									<p>If you think this wordpress plug-in is useful to you, then it\'s a good reason to do a donation. Your gratitude and finance help will motivate me to continue <strong>GUIFORM</strong> project development.</p>									<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">										<input type="hidden" name="cmd" value="_s-xclick">										<input type="hidden" name="hosted_button_id" value="T68UXN46V3MEC">										<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">										<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">									</form>									<p style="font-weight: bold; text-align: center; color: red; text-transform: uppercase;">Beta Version</p>								</div>'};a.contextMenu=function(g){var e="";var f=a.Context.menu;var c=b(".ui-sortable li.ui-draggable.active");var d=(c.hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);if(c.hasClass("merge")){e+=(c.hasClass("floatLine"))?f.g_blockLine:f.g_floatLine;e+=(c.hasClass("nextLine"))?f.g_nextLineOn:f.g_nextLineOff}if(d.hasClass("f_submit")||d.hasClass("f_image")){e+=(d.hasClass("nextLine"))?f.c_nextLineOn:f.c_nextLineOff;e+=(d.hasClass("floatLine"))?f.c_blockLine:f.c_floatLine;e+=f.c_delete}else{e+=(d.hasClass("shrink"))?f.c_expand:f.c_shrink;e+=(d.hasClass("nextLine"))?f.c_nextLineOn:f.c_nextLineOff;e+=(d.hasClass("floatLine"))?f.c_blockLine:f.c_floatLine}e+"<ul>"+e+"</ul>";b(a.Container.contextMenu).html(e).css({left:(g.pageX)+"px",top:(g.pageY)+"px"}).show();g.preventDefault()};a.buttonFonts=function(c,d){b(d).parent().addClass("active");b("#header .wrapper").remove()};GuiForm=(function(){function c(){this.init()}c.prototype.init=function(){if(guiBuilder.form===null&&guiform.id!==""){location.href=location.href.split("&form")[0]}b("#GuiForm").html("");b("#GuiForm").hide();a.htmlTools();a.htmlCanvas();b("body").append(a.Container.contextMenu);b("body").append("<span class='canvas-resize'><span class='arrow'></span><span class='canvas-info'></span></span>");this.build();b("#tools").tools({title:a.title});b("#GuiForm #container").append(b("#content-notice").html());b("#content-notice").remove();b("#GuiForm").slideDown(800)};c.prototype.form=function(f){var h=f.replace("t_","");var d="field_"+String(Math.random()).substring(2,6);var j="item-"+String(Math.random()).substring(2,8);var i=(a.dragItemID=="t_checkbox")?"[]":"";if(a.draggingItem==false){var g=b(".ui-sortable li.ui-draggable.active");var e=b("<li></li>");(g.size())?g.after(e):b("#canvas .ui-sortable").append(e);e.css({opacity:"0"}).addClass("restored-item ui-draggable").removeClass("selected").animate({opacity:1},1300,function(){b(this).removeClass("restored-item")})}else{var e=b("#canvas").find(".ui-draggable[style*='display: none']")}e.html(a.Form[h][0]).addClass(f.replace("t_","f_")+" blockLine expand clearfix item").attr("data-name",d).attr("data-type",a.Form[h][1]).attr("id",j).find("input, select, textarea").attr("name",d+i);if(h=="phone"){b('input[name="'+d+'"]').attr("data-mask","(###) ###-####").mask("(###) ###-####")}else{if(h=="spinner"){b('input[name="'+d+'"]').spinner()}else{if(h=="button"){e.find("input").each(function(){var k="button-"+String(Math.random()).substring(2,8);b(this).attr("id",k);b(this).next().attr("for",k)});b("#"+j).find(".button").buttonset()}else{if(h=="submit"){b('input[name="'+d+'"]').attr("name","submit")}}}}};c.prototype.build=function(){var h=this;var d=a.Selector;var g=a.Prop;b("#tools").accordion({heightStyle:"content"}).disableSelection();b("#tools li").draggable({appendTo:"body",helper:"clone",containment:"#wpwrap",connectToSortable:".ui-droppable.ui-sortable",revert:"invalid",addClasses:"invalid",delay:50,scroll:true,scrollSensitivity:10,scrollSpeed:10,zIndex:2000,start:function(i,j){b(".ui-draggable.ui-sortable-helper, .ui-sortable .ui-state-highlight").remove();b(".ui-resizable-handle").show();b("#contextMenu").hide();a.draggingItem=true;a.dragItem=b(this).attr("id").replace("t_","");a.dragItemID=b(this).attr("id");b(j.helper).css({display:"block",width:b("#tools").width()});b("#canvas ul#sortable").sortable("option","axis","x,y")},stop:function(i,j){a.draggingItem=false}});b("#canvas ul#sortable").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",zIndex:2000,drop:function(i,j){j.draggable.addClass("blockLine")}}).sortable({revert:true,axis:"y",forcePlaceholderSize:true,forceHelperSize:true,opacity:0.9,containment:false,scroll:true,scrollSensitivity:5,scrollSpeed:5,placeholder:"ui-state-highlight",tolerance:"pointer",zIndex:99999,out:function(i,j){b("#tools li").draggable("enable");b("#canvas ul#sortable").sortable("option","axis","x,y");b("#tools li").draggable("option","axis","x,y");if(a.draggingItem==true){b(j.helper).css({display:"block",width:b("#tools").width()})}},start:function(i,j){if(a.draggingItem==true){h.form(a.dragItemID)}b("#tools li").draggable("option","axis","y");b("#canvas ul#sortable").sortable("option","revert",true);b(this).sortable("option","containment",false);b("#tools li").draggable("disable");b("li.ui-state-highlight").css({height:(a.draggingItem?b(j.item).height():b(j.item).innerHeight()+1.5)});if(j.item.hasClass("floatLine")){b("#canvas ul#sortable").sortable("option","axis","x,y");b("li.ui-state-highlight").css({"float":"left",clear:"none",display:"inline-block",width:b(j.helper).outerWidth()})}else{b("#canvas ul#sortable").sortable("option","axis","y");b("li.ui-state-highlight").css({"float":"none",clear:"both",display:"block",width:"auto"})}if(a.draggingItem==true){b(j.helper).css({width:b(j.helper).outerWidth()-25});b(j.helper).css({left:b("#canvas").offset().left+10})}if(j.item.hasClass("merge")){b(j.placeholder).height(b(j.placeholder).outerHeight(true)-22)}if(a.draggingItem==false&&j.item.hasClass("floatLine")==false){b("#canvas").width(b(j.helper).outerWidth(true)+30)}},stop:function(i,j){b("#canvas").find(".active").css({width:"auto"});a.sortingItem=true;b("#tools li").draggable("enable");if(j.item.hasClass("floatLine")){b(j.item).css("display","inline-table")}},beforeStop:function(i,j){b("#canvas textarea").css("max-height",a.maxInputHeight);b("#canvas").find(".ui-draggable[style*='display: none']").remove()}});var f;b("#canvas").resizable({minWidth:a.canvasMinWidth,handles:"e",zIndex:1,create:function(i,j){},start:function(i,j){f=j.size.width},resize:function(k,l){var j=b(this).resizable("option","minWidth");b(".canvas-resize").css({left:k.pageX-158,top:k.pageY-45}).show();b(".canvas-resize  .canvas-info").html((l.size.width-30)+" pixels");(f>l.size.width)?b(".canvas-resize .canvas-info").append("<br /><span>Ctrl + left arrow key</span>"):b(".canvas-resize  .canvas-info").append("<br /><span>Ctrl + right arrow key</span>");f=l.size.width;var i=b("body")[0];if(i.scrollWidth>i.clientWidth){if(b("#canvas").width()<a.canvasMaxWidth){b(window).scrollLeft(b("#canvas").width())}else{b(window).scrollLeft(b(window).scrollLeft())}}},stop:function(i,j){b(this).css("width",b(this).width());b(".canvas-resize").hide();b(".ui-resizable-e").css("background-color","#ECECEC")}});b("#collapse-menu").click(function(){b("#GuiForm").css("width","1px")});b("#canvas ul.ui-sortable").css({"min-height":a.canvasHeight()});b("#GuiForm").css("width","auto");b(document).ready(function(){}).on("click","#tools li",function(){a.dragItemID=this.id;h.form(this.id)});b(window).resize(function(){b("#canvas").css({height:b("body").innerHeight()-b("#canvas").offset().top-70})}).scroll(function(j){var p=b(window);var q=b("#GuiForm");var n=b("#header");var o=b("#tools");var i=b("#wpadminbar");var k=q.offset().top-i.innerHeight();var r=q.offset().left;var m=b(".ui-resizable-e");(p.scrollTop()<k)?n.css({top:q.offset().top-p.scrollTop()}).removeClass("float"):n.addClass("float").css({top:q.offset().top-(q.offset().top-i.innerHeight())});(p.scrollTop()<k)?o.css({top:q.offset().top-p.scrollTop()+1}):o.css({top:i.innerHeight()+1});var l=10;(p.scrollTop()<k)?m.css({top:"1px"}):m.css("top",p.scrollTop()-l-q.offset().top+n.innerHeight()-1);(p.scrollLeft()<r)?o.removeClass("float").css({left:q.offset().left-p.scrollLeft()}):o.css({left:0});(p.scrollLeft()<r)?n.css({left:q.offset().left-p.scrollLeft()}):n.css({left:0})}).mousewheel(function(j,k){if(b(j.target)[0].className.split(" ")[0]!=="list"){j.preventDefault();var i=b(window).scrollTop();b(window).scrollTop(i-(k*30))}});var e=0;setInterval(function(i){var l=b(window);var m=b("#header");var k=b("#GuiForm");var j=k.offset().left;b("#sortable").css("height","auto");b("#canvas").css({height:b("body").innerHeight()-b("#canvas").offset().top-70});b("#container").css("width",screen.width-(b("#tools").width()+b("#adminmenuwrap").width()+48));b("#header ul").css("min-width",screen.width-(b("#adminmenuwrap").width()+50));(b("#canvas .selected").size()>1)?b("#merge").addClass("on"):b("#merge").removeClass("on");delete (a)},100);b(document).click(function(i){a.focus=b(i.target)[0].nodeName.toLowerCase()}).keydown(function(j){var i=j.charCode||j.keyCode||0;var l=document.activeElement.nodeName.toLowerCase()||a.focus;if(j.ctrlKey){var k=b("#canvas").width();if(i==37){k--;b("#canvas").css("width",k)}else{if(i==39){k++;b("#canvas").css("width",k)}}}if((i==38||i==40)&&l!=="textarea"){return false}});b(".ui-sortable").on("mousedown",".merge-item",function(i){b(".merge-item.active").removeClass("active");b(this).addClass("active")});b(a.Selector.toolLi.selector).draggable("option","refreshPositions",true);b("#contextual-help-columns .contextual-help-tabs a, #contextual-help-link").click(function(i){b("#tools, #header").css("top","auto").removeClass("float")});b("body").off("contextmenu");b(".ui-sortable").on("contextmenu",".ui-draggable",function(i){if(b(this).hasClass("f_page_break")){b(document).off("contextmenu")}else{a.contextMenu(i)}});b("#wpwrap").mousedown(function(i){b(a.Selector.contextMenu.selector).hide()});b(a.Selector.contextMenu.selector).click(function(i){b(a.Selector.contextMenu.selector).hide()});b("#contextMenu").on("click","#c_shrink",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);i.css("display","list-item");i.find(".label").css("width","");i.removeClass("expand").addClass("shrink");b("#p_label_width").spinner("option","disabled",true);b("#p_label_width").val("")});b("#contextMenu").on("click","#c_expand",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);if(i.hasClass("blockLine")==false){i.css("display","")}i.removeClass("shrink top-align").addClass("expand");b("#p_label_width").spinner("option","disabled",false);b("#p_label_width").val(i.find(".label").width())});b("#contextMenu").on("click","#c_blockLine",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);i.css("display","list-item");i.removeClass("floatLine").addClass("blockLine")});b("#contextMenu").on("click","#c_floatLine",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);i.css("display","list-item");i.removeClass("blockLine").addClass("floatLine")});b("#contextMenu").on("click","#c_nextLineOff",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);i.addClass("nextLine")});b("#contextMenu").on("click","#c_nextLineOn",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);i.removeClass("nextLine")});b("#contextMenu").on("click","span",function(j){var i=(b(".ui-sortable li.ui-draggable.active").hasClass("merge"))?b(".ui-sortable .merge-item.active"):b(a.Selector.active.selector);if(i.hasClass("shrink")||(i.hasClass("shrink")&&i.hasClass("expand"))){b("#p_text_width").attr("disabled","disabled");b("#p_text_width").val("")}else{b("#p_text_width").removeAttr("disabled");b("#p_text_width").val(i.find(".label").width())}});b("#contextMenu").on("click","#g_blockLine",function(j){var i=b(".ui-sortable li.ui-draggable.active");i.css("display","list-item");i.removeClass("floatLine").addClass("blockLine")});b("#contextMenu").on("click","#g_floatLine",function(j){var i=b(".ui-sortable li.ui-draggable.active");i.css("display","list-item");i.removeClass("blockLine").addClass("floatLine")});b("#contextMenu").on("click","#g_nextLineOff",function(j){var i=b(".ui-sortable li.ui-draggable.active");i.addClass("nextLine")});b("#contextMenu").on("click","#g_nextLineOn",function(j){var i=b(".ui-sortable li.ui-draggable.active");i.removeClass("nextLine")});b("#contextMenu").on("click","#c_delete",function(i){b("#delete").trigger("click")})};return c})();new GuiForm()}).call(this);